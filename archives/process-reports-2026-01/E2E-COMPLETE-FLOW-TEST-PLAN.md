# 端到端完整流程测试计划

> **版本**: 1.0  
> **创建时间**: 2026-01-19  
> **测试目标**: 验证从领域项目创建到Sprint计划的完整业务流程

---

## 🎯 测试范围

### 完整业务流程
```
领域项目创建 
  → Epic需求管理 
  → Feature需求拆解 
  → PRD文档编写 
  → SSTS技术拆解  
  → PI Planning规划 
  → Sprint团队计划
```

---

## 📋 测试用例集合

### TC01: 领域项目创建流程
**测试目标**: 验证项目创建的完整流程

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 访问项目列表 | 显示现有项目列表 | `/function/c0-project` | ✅ |
| 2 | 点击"创建项目"按钮 | 打开项目创建向导 | 创建对话框 | ✅ |
| 3 | 填写基本信息 | 表单验证通过 | Step 1 | ✅ |
| 4 | 配置交付节点 | 显示里程碑列表 | Step 2 | ✅ |
| 5 | 配置团队 | 选择团队和角色 | Step 3 | ✅ |
| 6 | 确认创建 | 项目创建成功，跳转到详情 | ProjectDetail | ✅ |

---

### TC02: Epic需求管理流程
**测试目标**: 验证Epic的创建、查看和拆解

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 访问Epic列表 | 显示Epic列表 | `/function/c1/epic` | ✅ |
| 2 | 查看Epic详情 | 显示Epic基本信息 | Epic详情 | ✅ |
| 3 | 点击"拆解Feature" | 打开Feature拆解对话框 | 拆解对话框 | ✅ |
| 4 | 添加Feature | Feature列表增加 | Epic详情 | ✅ |
| 5 | 查看Feature列表 | 显示所有Feature | `/function/c1/feature` | ✅ |

---

### TC03: Feature PRD编写流程
**测试目标**: 验证Feature的PRD文档编写功能

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 访问Feature列表 | 显示Feature列表 | `/function/c1/feature` | ✅ |
| 2 | 选择一个Feature | 打开Feature详情 | Feature详情 | ✅ |
| 3 | 点击"编辑PRD"标签 | 打开PRD编辑器 | PRD编辑器 | ✅ |
| 4 | 编写PRD内容 | 富文本编辑正常 | PRD编辑器 | ✅ |
| 5 | 保存PRD | PRD保存成功，显示版本号 | Feature详情 | ✅ |
| 6 | 预览PRD | 正确渲染HTML | PRD预览 | ✅ |

---

### TC04: Feature拆解SSTS流程
**测试目标**: 验证Feature到SSTS的技术拆解

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | Feature详情页 | 显示Feature信息 | Feature详情 | ✅ |
| 2 | 点击"拆解SSTS" | 打开SSTS拆解对话框 | 拆解对话框 | ✅ |
| 3 | 填写SSTS信息 | 表单验证通过 | SSTS表单 | ✅ |
| 4 | 设置SSTS依赖 | 依赖关系建立 | 依赖设置 | ✅ |
| 5 | 保存SSTS | SSTS创建成功 | Feature详情 | ✅ |
| 6 | 查看SSTS列表 | 显示拆解的SSTS | SSTS Tab | ✅ |
| 7 | 访问SSTS管理 | 显示所有SSTS | `/function/c1/ssts` | ✅ |

---

### TC05: PI Planning - 全局视角流程
**测试目标**: 验证全局视角的Feature/SSTS分配

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 访问PI Planning看板 | 显示PI列表 | `/function/c3/planning/pi-planning-board` | ✅ |
| 2 | 选择PI-001 | 显示PI迭代看板 | PI Planning看板 | ✅ |
| 3 | 点击"切换到全局视角" | 跳转到全局视角 | `/function/c3/planning/pi/pi-001/stage1` | ✅ |
| 4 | 查看默认Sprint | 显示6个Sprint | 全局视角 | ✅ |
| 5 | 点击"添加Sprint" | Sprint数量增加到7 | 全局视角 | ✅ |
| 6 | 拖拽Feature到Sprint | Feature分配成功 | Team+Sprint矩阵 | ✅ |
| 7 | 设置Feature持续时间 | 打开duration对话框 | Duration对话框 | ✅ |
| 8 | 设置跨2个Sprint | Feature显示黄色背景 | Sprint卡片 | ✅ |
| 9 | 为Sprint设置里程碑 | 里程碑标签显示 | Sprint标题 | ✅ |
| 10 | 拖拽SSTS到Sprint | SSTS分配成功 | Team+Sprint矩阵 | ✅ |
| 11 | 点击"检测冲突" | 显示冲突检测结果 | 冲突对话框 | ✅ |
| 12 | 点击"保存草稿" | 草稿保存成功提示 | 全局视角 | ✅ |

---

### TC06: PI Planning - 团队视角流程
**测试目标**: 验证团队视角的MR分配

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在全局视角点击"切换到团队视角" | 跳转到团队视角 | `/function/c3/planning/pi/pi-001/stage2` | ✅ |
| 2 | 选择"ACC团队" | 显示ACC团队相关需求 | 团队视角 | ✅ |
| 3 | 查看特性树 | 显示Feature→SSTS→MR三层结构 | 左侧树 | ✅ |
| 4 | 展开Feature节点 | 显示下级SSTS | 树节点 | ✅ |
| 5 | 展开SSTS节点 | 显示下级MR | 树节点 | ✅ |
| 6 | 在搜索框输入"MR-ACC" | 过滤显示匹配的MR | 树节点 | ✅ |
| 7 | 拖拽MR到Sprint 1 | Sprint高亮蓝色 | 右侧Sprint | ✅ |
| 8 | 释放鼠标 | MR出现在Sprint列表 | Sprint卡片 | ✅ |
| 9 | MR节点显示"已分配" | 标签显示 | 树节点 | ✅ |
| 10 | Sprint进度条更新 | 显示容量使用率 | Sprint进度 | ✅ |
| 11 | 点击MR的"移除"按钮 | MR从Sprint移除 | Sprint卡片 | ✅ |
| 12 | 切换到"APA团队" | 显示APA团队的33个MR | 团队视角 | ✅ |
| 13 | 切换到"LKA团队" | 显示LKA团队的59个MR | 团队视角 | ✅ |
| 14 | 点击"保存草稿" | 草稿保存成功提示 | 团队视角 | ✅ |

---

### TC07: 视角切换流程
**测试目标**: 验证两个视角的自由切换

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在全局视角分配Feature | 分配成功 | 全局视角 | ✅ |
| 2 | 点击"切换到团队视角" | 跳转成功 | 团队视角 | ✅ |
| 3 | 在团队视角分配MR | 分配成功 | 团队视角 | ✅ |
| 4 | 点击"切换到全局视角" | 跳转成功 | 全局视角 | ✅ |
| 5 | 验证之前的Feature分配 | 分配结果保留 | 全局视角 | ✅ |
| 6 | 再次切换到团队视角 | 跳转成功 | 团队视角 | ✅ |
| 7 | 验证之前的MR分配 | 分配结果保留 | 团队视角 | ✅ |

---

### TC08: 数据持久化流程
**测试目标**: 验证规划数据的保存和恢复

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在全局视角分配多个Feature | 分配成功 | 全局视角 | ✅ |
| 2 | 刷新浏览器（F5） | 页面重新加载 | 全局视角 | ✅ |
| 3 | 验证Feature分配 | 分配结果保留 | 全局视角 | ✅ |
| 4 | 切换到团队视角 | 跳转成功 | 团队视角 | ✅ |
| 5 | 分配多个MR | 分配成功 | 团队视角 | ✅ |
| 6 | 刷新浏览器（F5） | 页面重新加载 | 团队视角 | ✅ |
| 7 | 验证MR分配 | 分配结果保留 | 团队视角 | ✅ |

---

### TC09: 容量管理流程
**测试目标**: 验证Sprint容量和超载检测

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在团队视角查看Sprint容量 | 显示容量100 SP | 团队视角 | ✅ |
| 2 | 分配MR到Sprint直到接近容量 | 进度条变黄（80%） | Sprint卡片 | ✅ |
| 3 | 继续分配MR超过容量 | 进度条变红（>100%） | Sprint卡片 | ✅ |
| 4 | 查看容量使用详情 | 显示已用/可用容量 | Sprint卡片 | ✅ |
| 5 | 移除部分MR | 容量恢复正常，进度条变绿 | Sprint卡片 | ✅ |

---

### TC10: 依赖关系流程
**测试目标**: 验证SSTS依赖关系的管理

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在Feature详情查看SSTS | 显示SSTS列表 | Feature详情 | ✅ |
| 2 | 点击某个SSTS | 打开SSTS详情 | SSTS详情 | ✅ |
| 3 | 查看依赖关系Tab | 显示依赖的SSTS | 依赖Tab | ✅ |
| 4 | 在全局视角选中SSTS | SSTS高亮 | 全局视角 | ✅ |
| 5 | 观察依赖的SSTS | 依赖项高亮显示 | Sprint矩阵 | ✅ |
| 6 | 点击"检测冲突" | 显示依赖冲突报告 | 冲突对话框 | ✅ |

---

### TC11: 产品过滤流程
**测试目标**: 验证PI看板的产品过滤功能

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 访问PI Planning看板 | 显示所有产品的Feature | PI看板 | ✅ |
| 2 | 选择"智能驾驶"产品 | 只显示智能驾驶的Feature | PI看板 | ✅ |
| 3 | 多选"智能驾驶"+"智能座舱" | 显示两个产品的Feature | PI看板 | ✅ |
| 4 | 清除选择，选择"全部产品" | 显示所有产品 | PI看板 | ✅ |
| 5 | 查看Sprint数量 | 显示6个Sprint | PI看板 | ✅ |
| 6 | 查看Feature分布 | Feature按Sprint和产品分组 | PI看板 | ✅ |

---

### TC12: Sprint管理流程
**测试目标**: 验证Sprint的动态添加和删除

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在全局视角查看Sprint | 默认显示6个Sprint | 全局视角 | ✅ |
| 2 | 点击"+ 添加Sprint" | Sprint增加到7个 | Sprint管理区 | ✅ |
| 3 | 验证新Sprint日期 | 日期自动计算（续接上一个） | Sprint卡片 | ✅ |
| 4 | 点击"- 删除最后Sprint"（有分配） | 弹出确认对话框，提示有分配 | 确认对话框 | ✅ |
| 5 | 取消删除 | Sprint保留 | 全局视角 | ✅ |
| 6 | 删除最后Sprint（无分配） | Sprint成功删除 | 全局视角 | ✅ |
| 7 | 验证Sprint数量 | 恢复到6个 | 全局视角 | ✅ |

---

### TC13: Feature跨迭代流程
**测试目标**: 验证Feature的跨迭代分配功能

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 拖拽Feature到Sprint 1 | Feature分配到Sprint 1 | 全局视角 | ✅ |
| 2 | 点击Feature的"设置持续时间"按钮 | 打开duration对话框 | Duration对话框 | ✅ |
| 3 | 设置持续2个Sprint | 对话框显示覆盖Sprint 1-2 | Duration对话框 | ✅ |
| 4 | 保存设置 | Feature显示"持续2个Sprint"标签 | Feature卡片 | ✅ |
| 5 | 观察Feature外观 | 黄色渐变背景+橙色边框 | Feature卡片 | ✅ |
| 6 | 在Sprint 2也看到Feature | Feature同时显示在两个Sprint | Sprint 2 | ✅ |
| 7 | 修改duration为1 | Feature恢复正常显示 | Feature卡片 | ✅ |

---

### TC14: 里程碑设置流程
**测试目标**: 验证Sprint里程碑和版本目标设置

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 在Sprint 3点击"设置里程碑" | 打开里程碑对话框 | 里程碑对话框 | ✅ |
| 2 | 选择车型节点 | 车型节点选中 | 里程碑对话框 | ✅ |
| 3 | 选择版本目标 | 版本目标选中 | 里程碑对话框 | ✅ |
| 4 | 保存设置 | 里程碑保存成功 | 全局视角 | ✅ |
| 5 | 验证Sprint标题 | 显示里程碑标签 | Sprint卡片 | ✅ |
| 6 | 在PI看板查看Sprint 3 | 里程碑也显示 | PI看板 | ✅ |

---

### TC15: 团队MR分配流程（完整）
**测试目标**: 验证团队视角的完整MR规划流程

| 步骤 | 操作 | 预期结果 | 页面 | 截图 |
|------|------|----------|------|------|
| 1 | 进入团队视角 | 显示团队选择 | 团队视角 | ✅ |
| 2 | 选择ACC团队 | 显示94个MR的特性树 | 团队视角 | ✅ |
| 3 | 点击"全部展开" | 所有树节点展开 | 特性树 | ✅ |
| 4 | 查看Feature节点 | 蓝色图标，显示SP | 树节点 | ✅ |
| 5 | 查看SSTS节点 | 黄色图标，显示SP | 树节点 | ✅ |
| 6 | 查看MR节点 | 绿色图标，显示工时 | 树节点 | ✅ |
| 7 | 拖拽MR-001到Sprint 1 | Sprint 1高亮蓝色边框 | 右侧Sprint | ✅ |
| 8 | 释放鼠标 | MR-001出现在Sprint 1列表 | Sprint卡片 | ✅ |
| 9 | 验证MR节点状态 | 显示"已分配: Sprint 1"标签 | MR节点 | ✅ |
| 10 | 拖拽更多MR到不同Sprint | 分配成功 | 多个Sprint | ✅ |
| 11 | 观察Sprint进度条 | 随分配实时更新 | Sprint进度 | ✅ |
| 12 | 分配MR直到容量超载 | 进度条变红，显示120% | Sprint卡片 | ✅ |
| 13 | 点击"全部收起" | 所有节点收起 | 特性树 | ✅ |
| 14 | 使用搜索功能 | 过滤显示匹配节点 | 特性树 | ✅ |
| 15 | 保存规划 | 草稿保存成功 | 团队视角 | ✅ |

---

## 🎬 测试执行计划

### 测试环境
- **浏览器**: Chrome 最新版
- **分辨率**: 1920x1080
- **数据**: Mock数据（186个MR，62个SSTS，30个Feature）
- **工具**: MCP Playwright

### 测试顺序
```
1. TC01 → TC02 → TC03 → TC04  (需求管理流程)
2. TC05                       (全局视角规划)
3. TC06                       (团队视角规划)
4. TC07                       (视角切换)
5. TC08                       (数据持久化)
6. TC09                       (容量管理)
7. TC10                       (依赖关系)
8. TC11                       (产品过滤)
9. TC12                       (Sprint管理)
10. TC13                      (Feature跨迭代)
11. TC14                      (里程碑设置)
12. TC15                      (团队MR分配完整流程)
```

### 截图规范
- 每个关键步骤截图
- 文件命名：`TC{编号}-Step{步骤}-{描述}.png`
- 保存路径：`browser-test/screenshots/complete-flow/`

---

## 📊 预期测试结果

### 成功标准
- ✅ 所有15个测试用例全部通过
- ✅ 所有页面正确加载和渲染
- ✅ 所有交互功能正常工作
- ✅ 数据正确保存和恢复
- ✅ 无JavaScript错误
- ✅ 无UI渲染问题

### 性能标准
- ⏱️ 页面加载时间 < 2秒
- ⏱️ 拖拽响应时间 < 100ms
- ⏱️ 数据保存时间 < 500ms
- ⏱️ 树节点展开时间 < 300ms

---

## 🐛 已知问题记录

### 非阻塞问题
- ⚠️ Element Plus percentage prop警告（不影响功能）
- ⚠️ 浏览器扩展警告（Quark扩展，不影响测试）
- ⚠️ KaTeX警告（不影响核心功能）

### 已修复问题
- ✅ 路由参数名称不匹配
- ✅ Store属性名不匹配
- ✅ piId响应式问题
- ✅ 数据安全检查

---

## 📝 测试报告要求

### 报告内容
1. **测试概述**：执行时间、环境信息
2. **测试结果汇总**：通过/失败用例统计
3. **详细测试记录**：每个用例的执行结果
4. **截图附件**：关键步骤截图
5. **问题列表**：发现的问题和建议
6. **性能数据**：页面加载和交互时间
7. **总结建议**：整体评价和后续建议

### 报告格式
- Markdown格式
- 包含截图引用
- 问题分级（Critical/Major/Minor）
- 建议优先级（P0/P1/P2）

---

**文档版本**: 1.0  
**最后更新**: 2026-01-19  
**维护人员**: 测试团队
