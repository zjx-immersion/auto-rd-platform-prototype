# 团队视角测试数据扩充报告

> 更新时间：2026-01-19  
> 任务：为团队视角页面补充充足的测试数据

---

## 📊 数据扩充前后对比

### 扩充前
| 团队 | MR数量 | SSTS数量 | 总工时 | 问题 |
|------|--------|----------|--------|------|
| ACC团队 (team-001) | 4 | 8 | ~200h | 数据少 |
| APA团队 (team-002) | 2 | 5 | ~100h | 数据少 |
| LKA团队 (team-003) | 0 | 0 | 0h | **无数据** |
| **总计** | **6** | **13** | **~300h** | **严重不足** |

### 扩充后
| 团队 | MR数量 | SSTS数量 | 总工时 | 平均工时/MR | 状态 |
|------|--------|----------|--------|-------------|------|
| ACC团队 (team-001) | 94 | ~30 | ~3,760h | 40h | ✅ 充足 |
| APA团队 (team-002) | 33 | ~10 | ~1,450h | 44h | ✅ 充足 |
| LKA团队 (team-003) | 59 | ~20 | ~2,360h | 40h | ✅ 充足 |
| **总计** | **186** | **~60** | **~7,570h** | **41h** | **✅ 充足** |

---

## 🎯 扩充策略

### 1. 批量生成MR数据
- 为每个现有SSTS自动生成3-5个MR
- 确保每个MR有合理的工时估算（30-70小时）
- 自动关联到对应的团队和SSTS

### 2. 团队负载平衡
- 初始数据：ACC团队183个MR，严重失衡
- 重新分配策略：
  - APA团队：从3个增加到33个（+30个）
  - LKA团队：从0个增加到59个（+59个）
  - ACC团队：从183个调整到94个（保持合理数量）

### 3. 数据关联完整性
- ✅ 每个MR关联正确的SSTS
- ✅ 每个MR关联正确的团队
- ✅ 每个SSTS关联正确的Feature
- ✅ 每个MR有targetPI设置为pi-001

---

## 📝 执行的脚本

### 1. `expand-team-view-test-data.py`
**功能**：为每个SSTS批量生成MR

**关键逻辑**：
```python
for ssts in existing_ssts:
    current_mrs = [mr for mr in existing_mrs if mr['sstsId'] == ssts['id']]
    needed_mrs = max(0, 3 - len(current_mrs))
    
    for i in range(needed_mrs):
        new_mr = {
            "id": f"mr-{counter:03d}",
            "code": f"MR-{ssts['code']}-{i+1:03d}",
            "title": f"{ssts['name']}_模块{i+1}",
            "sstsId": ssts['id'],
            "teamId": team_id,
            "effortHours": 30 + (i * 10),
            "storyPoints": 4 + i,
            "targetPI": "pi-001"
        }
```

**结果**：生成了180个新MR

### 2. `balance-team-mrs.py`
**功能**：平衡各团队的MR分布

**策略**：
- 将部分ACC团队的SSTS重新分配给APA和LKA团队
- 同时更新对应的MR的teamId

**结果**：
- APA团队：3 → 33 MR
- LKA团队：0 → 9 MR

### 3. `add-more-lka-data.py` + 手动调整
**功能**：为LKA团队补充更多数据

**策略**：
- 将30个ACC团队的SSTS重新分配给LKA团队
- 直接重新分配50个ACC团队的MR给LKA团队

**结果**：
- LKA团队：9 → 59 MR
- 数据分布更加均衡

---

## 📊 数据质量验证

### 1. 数据完整性 ✅
- [x] 所有MR都有teamId
- [x] 所有MR都有sstsId
- [x] 所有MR都有targetPI
- [x] 所有MR都有effortHours和storyPoints
- [x] 所有MR都有正确的状态和优先级

### 2. 数据关联性 ✅
- [x] MR → SSTS → Feature 关联完整
- [x] MR → Team 关联正确
- [x] MR → PI 关联正确（都是pi-001）
- [x] SSTS → assignedTeam 关联正确

### 3. 数据分布性 ✅
| 维度 | 分布情况 | 评价 |
|------|----------|------|
| 团队分布 | 94:33:59 (约50%:18%:32%) | ✅ 相对均衡 |
| 工时分布 | 平均41h/MR | ✅ 合理 |
| 优先级分布 | P0/P1/P2 混合 | ✅ 多样化 |
| 状态分布 | 主要为ready | ✅ 符合规划阶段 |

---

## 🧪 测试场景覆盖

基于新的数据量，现在可以充分测试以下场景：

### 1. 基础功能测试
- ✅ **团队选择**：3个团队都有充足数据
- ✅ **特性树展示**：Feature → SSTS → MR 层级完整
- ✅ **数据过滤**：每个团队都能看到专属的MR列表

### 2. 容量规划测试
**ACC团队 (94 MR, ~3,760h)**
- 假设团队5人，每人每周40h
- 每个Sprint（2周）容量：5人 × 40h/周 × 2周 = 400h
- 可以测试9-10个Sprint的规划
- ✅ 足够测试多迭代规划

**APA团队 (33 MR, ~1,450h)**
- 每个Sprint容量：400h
- 可以测试3-4个Sprint的规划
- ✅ 足够测试基本规划场景

**LKA团队 (59 MR, ~2,360h)**
- 每个Sprint容量：400h
- 可以测试5-6个Sprint的规划
- ✅ 足够测试中等规模规划

### 3. 拖拽交互测试
- ✅ **大量MR拖拽**：测试性能和UI响应
- ✅ **跨Sprint调整**：测试MR在不同Sprint间移动
- ✅ **容量超载**：测试Sprint容量超过100%的情况

### 4. 搜索和过滤测试
- ✅ **搜索功能**：足够的数据量测试搜索性能
- ✅ **树节点展开/收起**：测试大量节点的渲染性能
- ✅ **状态标签**：测试"已分配"/"未分配"状态切换

---

## 🎯 数据特点

### 1. 真实性
- **工时估算**：30-70小时/MR，符合实际模块开发周期
- **优先级分布**：P0/P1/P2 混合，模拟真实需求优先级
- **依赖关系**：保留原有依赖，真实反映模块间关系

### 2. 多样性
- **模块名称**：涵盖感知、控制、HMI等多种模块
- **需求编码**：规范的编码格式（MR-XXX-001）
- **状态分布**：主要为ready，符合规划阶段特点

### 3. 可扩展性
- **脚本化生成**：可随时调整参数重新生成
- **关联完整**：可以基于现有数据继续扩展
- **格式统一**：所有数据遵循相同的schema

---

## 📈 容量规划示例

### 场景：ACC团队 6个Sprint规划

**团队信息**
- 团队人数：5人
- 每人每Sprint容量：40h/周 × 2周 = 80h
- 团队每Sprint容量：5人 × 80h = 400h

**MR分配示例**
| Sprint | MR数量 | 总工时 | 容量使用率 | 状态 |
|--------|--------|--------|-----------|------|
| Sprint 1 | 10 | 400h | 100% | ✅ 满载 |
| Sprint 2 | 10 | 400h | 100% | ✅ 满载 |
| Sprint 3 | 12 | 480h | 120% | ⚠️ 超载 |
| Sprint 4 | 9 | 360h | 90% | ✅ 合理 |
| Sprint 5 | 8 | 320h | 80% | ✅ 合理 |
| Sprint 6 | 10 | 400h | 100% | ✅ 满载 |

**总计**：59 MR, ~2,360h

这样的数据量可以充分测试：
- ✅ 容量规划和优化
- ✅ 超载预警
- ✅ 多Sprint调整
- ✅ 依赖关系处理

---

## ✅ 完成检查清单

### 数据扩充
- [x] 为所有SSTS生成足够的MR
- [x] 确保每个团队都有充足的MR
- [x] 平衡各团队的MR分布
- [x] 设置合理的工时和优先级

### 数据关联
- [x] MR关联正确的SSTS
- [x] MR关联正确的团队
- [x] MR关联正确的PI
- [x] SSTS关联正确的Feature

### 数据验证
- [x] 验证数据完整性
- [x] 验证数据关联性
- [x] 验证数据分布合理性
- [x] 验证JSON格式正确性

---

## 🎉 总结

### 数据扩充成果
- **MR数量**：6 → 186（增加30倍）
- **总工时**：~300h → ~7,570h（增加25倍）
- **团队覆盖**：2个团队有数据 → 3个团队都有数据
- **测试场景**：基础测试 → 完整多迭代规划测试

### 测试能力提升
1. ✅ **容量规划测试**：可测试多Sprint的容量规划
2. ✅ **性能测试**：足够的数据量测试渲染性能
3. ✅ **交互测试**：大量MR拖拽测试用户体验
4. ✅ **边界测试**：容量超载、依赖冲突等边界情况

### 用户价值
1. **真实场景**：数据量和分布接近真实PI Planning
2. **充分测试**：可以完整测试所有功能和交互
3. **性能验证**：可以发现潜在的性能问题
4. **用户体验**：在真实数据量下验证UI/UX设计

---

**文档版本**: 1.0.0  
**最后更新**: 2026-01-19  
**维护人员**: 开发团队
