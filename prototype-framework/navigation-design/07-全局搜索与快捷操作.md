# 全局搜索与快捷操作

> **版本**: V1.0  
> **日期**: 2025-01-14  
> **说明**: 定义全局搜索功能和快捷键操作

---

## 一、全局搜索设计

### 1.1 搜索入口

**位置**: 顶部导航栏中央

**快捷键**: `Ctrl/Cmd + K` 或 `/`

**视觉设计**:
```
┌─────────────────────────────────┐
│ 🔍 搜索功能、Epic、Task...      │
│     Ctrl+K                      │
└─────────────────────────────────┘
```

### 1.2 搜索范围

| 搜索类型 | 搜索字段 | 权重 | 示例 |
|---------|---------|------|------|
| 功能 | 功能编号、功能名称、功能描述 | 10 | "C1-F01", "Epic创建" |
| Epic | Epic编号、Epic标题、Epic描述 | 9 | "Epic-123", "智能驾驶" |
| Feature | Feature编号、Feature标题 | 8 | "Feature-456", "自动泊车" |
| SSTS | SSTS编号、SSTS标题 | 7 | "SSTS-789", "性能要求" |
| MR | MR编号、MR标题 | 7 | "MR-A1", "模块需求" |
| Task | Task编号、Task标题 | 6 | "Task-1234", "修复缺陷" |
| 缺陷 | 缺陷编号、缺陷标题 | 6 | "Bug-567", "登录失败" |
| 资产 | 资产名称、资产标签 | 5 | "登录模块", "认证" |
| 文档 | 文档标题、文档内容 | 4 | "用户手册", "API文档" |

### 1.3 搜索算法

**匹配规则**:
1. **精确匹配**: 编号完全匹配（权重 x 2）
2. **前缀匹配**: 标题以关键词开头（权重 x 1.5）
3. **包含匹配**: 标题包含关键词（权重 x 1）
4. **模糊匹配**: 拼音首字母匹配（权重 x 0.5）

**排序规则**:
1. 按匹配得分降序
2. 同分按类型权重降序
3. 同类型按更新时间降序

### 1.4 搜索结果展示

```
┌─────────────────────────────────────────────────────────────┐
│ 🔍 搜索: epic                                               │
├─────────────────────────────────────────────────────────────┤
│ 功能 (3)                                                    │
│ • C1-F01 Epic创建                                           │
│   创建Epic，定义业务需求                                    │
│   需求管理 > Epic管理                                       │
│                                                             │
│ • C1-F02 Epic优先级排序                                     │
│   对Epic进行优先级排序                                      │
│   需求管理 > Epic管理                                       │
│                                                             │
│ Epic (15)                                                   │
│ • Epic-123: 智能驾驶功能                                    │
│   状态: 进行中 | 优先级: 高 | 负责人: 张三                  │
│   更新时间: 2小时前                                         │
│                                                             │
│ • Epic-456: 智能座舱功能                                    │
│   状态: 已完成 | 优先级: 中 | 负责人: 李四                  │
│   更新时间: 昨天 14:30                                      │
│                                                             │
│ [查看全部结果 (18) →]                                       │
└─────────────────────────────────────────────────────────────┘
```

**交互**:
- 输入关键词: 实时搜索（防抖300ms）
- 按↑↓: 选择结果
- 按Enter: 跳转到选中结果
- 按ESC: 关闭搜索面板
- 点击结果: 跳转到对应页面
- 点击[查看全部结果]: 跳转到搜索结果页

### 1.5 搜索历史

```
┌─────────────────────────────────┐
│ 🔍 搜索                         │
├─────────────────────────────────┤
│ 🕐 最近搜索                     │
│ • epic                          │
│ • sprint                        │
│ • 智能驾驶                      │
│                                 │
│ 🔥 热门搜索                     │
│ • Epic创建                      │
│ • Task管理                      │
│ • 缺陷提交                      │
└─────────────────────────────────┘
```

---

## 二、快捷键系统

### 2.1 全局快捷键

| 快捷键 | 功能 | 说明 |
|-------|------|------|
| `Ctrl/Cmd + K` | 打开全局搜索 | 任意页面可用 |
| `/` | 打开全局搜索 | 任意页面可用（输入框除外） |
| `Ctrl/Cmd + B` | 折叠/展开左侧导航 | 任意页面可用 |
| `Ctrl/Cmd + Shift + B` | 折叠/展开右侧面板 | 任意页面可用 |
| `Ctrl/Cmd + H` | 返回首页（工作台） | 任意页面可用 |
| `Ctrl/Cmd + ,` | 打开设置 | 任意页面可用 |
| `Ctrl/Cmd + /` | 显示快捷键帮助 | 任意页面可用 |
| `ESC` | 关闭弹窗/面板 | 任意页面可用 |

### 2.2 导航快捷键

| 快捷键 | 功能 | 说明 |
|-------|------|------|
| `G + W` | 跳转到工作台 | Go to Workbench |
| `G + P` | 跳转到流程驱动 | Go to Process |
| `G + F` | 跳转到固有功能 | Go to Function |
| `G + N` | 打开通知中心 | Go to Notification |
| `G + S` | 打开设置 | Go to Settings |

### 2.3 操作快捷键

| 快捷键 | 功能 | 说明 |
|-------|------|------|
| `Ctrl/Cmd + N` | 新建 | 根据当前页面上下文新建 |
| `Ctrl/Cmd + S` | 保存 | 保存当前表单 |
| `Ctrl/Cmd + E` | 编辑 | 编辑当前项 |
| `Ctrl/Cmd + D` | 删除 | 删除当前项（需确认） |
| `Ctrl/Cmd + Enter` | 提交 | 提交当前表单 |
| `Ctrl/Cmd + Z` | 撤销 | 撤销上一步操作 |
| `Ctrl/Cmd + Shift + Z` | 重做 | 重做上一步操作 |

### 2.4 列表快捷键

| 快捷键 | 功能 | 说明 |
|-------|------|------|
| `↑` | 上一项 | 选择上一项 |
| `↓` | 下一项 | 选择下一项 |
| `Enter` | 打开 | 打开选中项 |
| `Space` | 选择/取消选择 | 多选模式 |
| `Ctrl/Cmd + A` | 全选 | 选择所有项 |
| `Ctrl/Cmd + Shift + A` | 取消全选 | 取消所有选择 |

### 2.5 快捷键帮助面板

**触发**: `Ctrl/Cmd + /`

```
┌─────────────────────────────────────────────────────────────┐
│ 快捷键帮助                                          [✕]     │
├─────────────────────────────────────────────────────────────┤
│ 全局快捷键                                                  │
│ Ctrl+K          打开全局搜索                                │
│ Ctrl+B          折叠/展开左侧导航                           │
│ Ctrl+H          返回首页                                    │
│                                                             │
│ 导航快捷键                                                  │
│ G + W           跳转到工作台                                │
│ G + P           跳转到流程驱动                              │
│ G + F           跳转到固有功能                              │
│                                                             │
│ 操作快捷键                                                  │
│ Ctrl+N          新建                                        │
│ Ctrl+S          保存                                        │
│ Ctrl+E          编辑                                        │
│                                                             │
│ [查看完整快捷键列表 →]                                      │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、快捷操作面板

### 3.1 命令面板

**触发**: `Ctrl/Cmd + Shift + P`

```
┌─────────────────────────────────────────────────────────────┐
│ > 输入命令...                                               │
├─────────────────────────────────────────────────────────────┤
│ 最近使用                                                    │
│ • 创建Epic                                                  │
│ • 创建Sprint                                                │
│ • 提交缺陷                                                  │
│                                                             │
│ 所有命令                                                    │
│ • 创建Epic                          C1-F01                  │
│ • 创建Feature                       C1-F05                  │
│ • 创建MR                            C1-F13                  │
│ • 创建Sprint                        C4-F01                  │
│ • 创建Task                          C4-F03                  │
│ • 提交缺陷                          C5-F16                  │
│ • 搜索资产                          C2-F01                  │
│ • 创建PI Planning                   C3-F03                  │
│ ...                                                         │
└─────────────────────────────────────────────────────────────┘
```

**功能**:
- 输入命令名称或功能编号
- 实时过滤命令列表
- 按↑↓选择命令
- 按Enter执行命令

### 3.2 快捷创建菜单

**触发**: 点击顶部导航栏的[+]按钮

```
┌─────────────────────────────────┐
│ 快捷创建                        │
├─────────────────────────────────┤
│ 📋 创建Epic                     │
│ 📝 创建Feature                  │
│ 🎯 创建PI Planning              │
│ 🏃 创建Sprint                   │
│ ✅创建Task                      │
│ 🐛 提交缺陷                     │
│ 🏛️ 搜索资产                     │
│ 📊 创建项目                     │
└─────────────────────────────────┘
```

---

## 四、智能推荐

### 4.1 上下文感知推荐

**场景1: Epic详情页**
```
┌─────────────────────────────────┐
│ 💡 建议操作                     │
├─────────────────────────────────┤
│ • 创建Feature (C1-F05)          │
│ • 优先级排序 (C1-F02)           │
│ • 版本分配 (C1-F04)             │
└─────────────────────────────────┘
```

**场景2: Sprint Planning页**
```
┌─────────────────────────────────┐
│ 💡 建议操作                     │
├─────────────────────────────────┤
│ • 创建Task (C4-F03)             │
│ • 查看燃尽图 (C4-F09)           │
│ • 团队容量规划 (C3-F05)         │
└─────────────────────────────────┘
```

### 4.2 角色推荐

**PO角色登录**:
```
┌─────────────────────────────────┐
│ 👋 欢迎回来，张三（PO）         │
├─────────────────────────────────┤
│ 💡 推荐功能                     │
│ • Epic创建 (C1-F01)             │
│ • Epic优先级排序 (C1-F02)       │
│ • 需求评审会议 (C1-F25)         │
│                                 │
│ 📊 推荐流程                     │
│ • 战略规划流程 (P1)             │
└─────────────────────────────────┘
```

---

## 五、搜索优化

### 5.1 搜索建议

**输入"epic"时的建议**:
```
┌─────────────────────────────────┐
│ 🔍 epic                         │
├─────────────────────────────────┤
│ 💡 你可能想要:                  │
│ • 创建Epic (C1-F01)             │
│ • 查看Epic列表                  │
│ • Epic优先级排序 (C1-F02)       │
│                                 │
│ 🔍 搜索结果 (18)                │
│ ...                             │
└─────────────────────────────────┘
```

### 5.2 搜索过滤

```
┌─────────────────────────────────────────────────────────────┐
│ 🔍 搜索: epic                                               │
│ 过滤: [类型▼] [状态▼] [负责人▼] [时间范围▼]                │
├─────────────────────────────────────────────────────────────┤
│ 功能 (3)                                                    │
│ Epic (15)                                                   │
│ ...                                                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 六、快捷操作最佳实践

### 6.1 常用操作流程

**创建Epic → Feature → SSTS → MR**:
```
1. Ctrl+K → 输入"创建Epic" → Enter
2. 填写Epic信息 → Ctrl+S 保存
3. 点击[创建Feature] 或 Ctrl+N
4. 填写Feature信息 → Ctrl+S 保存
5. 点击[SSTS拆解] 或 Ctrl+Shift+S
6. 填写SSTS信息 → Ctrl+S 保存
7. 点击[创建MR] 或 Ctrl+Shift+M
```

### 6.2 快捷键组合

**快速导航**:
- `G + W`: 返回工作台
- `G + F`: 进入固有功能
- `Ctrl+K`: 搜索功能
- `Enter`: 打开功能

**快速创建**:
- `Ctrl+Shift+P`: 打开命令面板
- 输入"创建"
- 选择要创建的对象
- `Enter`: 打开创建页面

---

**文档完成**: 导航系统设计全部完成！

