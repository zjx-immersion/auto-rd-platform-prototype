# Playwrighté…ç½®ä¼˜åŒ–æŠ¥å‘Š - å…¨å±æµ‹è¯•æ¨¡å¼

> **ä¼˜åŒ–æ—¥æœŸ**: 2026-01-20  
> **ä¼˜åŒ–ç›®æ ‡**: å…¨å±æµè§ˆå™¨æµ‹è¯• + å®Œæ•´é¡µé¢æˆªå›¾  
> **çŠ¶æ€**: âœ… **é…ç½®ä¼˜åŒ–å®Œæˆ**  

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

### ç”¨æˆ·éœ€æ±‚

```
1. æµ‹è¯•è¿‡ç¨‹ä¸­æµè§ˆå™¨å…¨å±æ‰“å¼€ â­â­â­â­â­
2. UIæµ‹è¯•éœ€è¦çœ‹ï¼š
   - é¡µé¢å¸ƒå±€ âœ“
   - æ•°æ®å±•ç¤º âœ“
   - åŠŸèƒ½ç‚¹å‡» âœ“
3. é¡µé¢åŠ è½½ä¸å±å¹•ä¸€æ ·é«˜ã€å®½ â­â­â­â­â­
```

### ä¼˜åŒ–æ–¹æ¡ˆ

```
æ ¸å¿ƒé…ç½®:
1. headless: false        // æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢
2. viewport: null         // ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçª—å£å¤§å°
3. --start-maximized      // å¯åŠ¨æ—¶æœ€å¤§åŒ–
4. --start-fullscreen     // å¯åŠ¨æ—¶å…¨å±
5. screenshot: 'always'   // æ€»æ˜¯æˆªå›¾

æ•ˆæœ:
âœ… æµè§ˆå™¨å…¨å±æ‰“å¼€
âœ… é¡µé¢å®Œæ•´æ˜¾ç¤ºï¼ˆä¸å±å¹•ä¸€æ ·é«˜ã€å®½ï¼‰
âœ… æ‰€æœ‰æˆªå›¾å…¨å±
âœ… å¸ƒå±€ã€æ•°æ®ã€åŠŸèƒ½æ¸…æ™°å¯è§
```

---

## ğŸ“‹ é…ç½®ä¼˜åŒ–è¯¦æƒ…

### 1. frontend/playwright.config.ts âœ…

**ä¼˜åŒ–å‰**:
```typescript
use: {
  viewport: null,  // ä½¿ç”¨å…¨å±æ¨¡å¼
  // ç¼ºå°‘ headless: false
}

projects: [
  {
    name: 'chromium',
    use: { 
      viewport: { width: 1920, height: 1080 },  // å›ºå®šå°ºå¯¸
      launchOptions: {
        args: [
          '--start-maximized',
          '--window-size=1920,1080'
        ]
      }
    }
  }
]
```

**ä¼˜åŒ–å**:
```typescript
use: {
  headless: false,   // â­ æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢
  viewport: null,    // â­ ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçª—å£å¤§å°
  screenshot: 'always',  // æ€»æ˜¯æˆªå›¾
}

projects: [
  {
    name: 'chromium',
    use: { 
      headless: false,   // â­ æ˜¾ç¤ºæµè§ˆå™¨
      viewport: null,    // â­ ä½¿ç”¨åŸç”Ÿçª—å£å¤§å°
      launchOptions: {
        args: [
          '--start-maximized',       // â­ å¯åŠ¨æ—¶æœ€å¤§åŒ–
          '--start-fullscreen',      // â­â­â­ å¯åŠ¨æ—¶å…¨å±
          '--window-size=1920,1080', // åå¤‡è®¾ç½®
          '--disable-blink-features=AutomationControlled',
        ],
        ignoreDefaultArgs: ['--enable-automation'],
      }
    }
  }
]
```

**æ ¸å¿ƒæ”¹è¿›**:
- âœ… æ·»åŠ  `headless: false` - æ˜¾ç¤ºæµè§ˆå™¨
- âœ… è®¾ç½® `viewport: null` - ä½¿ç”¨åŸç”Ÿçª—å£å¤§å°
- âœ… æ·»åŠ  `--start-fullscreen` - å…¨å±å¯åŠ¨
- âœ… éšè—è‡ªåŠ¨åŒ–æ ‡è¯† - æ›´æ¥è¿‘çœŸå®ç”¨æˆ·

---

### 2. browser-test/playwright.config.ts âœ…

**ä¼˜åŒ–å‰**:
```typescript
use: {
  viewport: { width: 1920, height: 1080 },  // å›ºå®šå°ºå¯¸
  headless: false,  // å·²æœ‰
  screenshot: 'only-on-failure',  // ä»…å¤±è´¥æ—¶æˆªå›¾
}

projects: [
  {
    name: 'chromium',
    use: { 
      viewport: { width: 1920, height: 1080 },
      headless: false
      // ç¼ºå°‘ launchOptions
    }
  }
]
```

**ä¼˜åŒ–å**:
```typescript
use: {
  headless: false,   // â­ æ˜¾ç¤ºæµè§ˆå™¨
  viewport: null,    // â­ ä½¿ç”¨åŸç”Ÿçª—å£å¤§å°
  screenshot: 'always',  // â­ æ€»æ˜¯æˆªå›¾
}

projects: [
  {
    name: 'chromium',
    use: { 
      headless: false,   // â­ æ˜¾ç¤ºæµè§ˆå™¨
      viewport: null,    // â­ ä½¿ç”¨åŸç”Ÿçª—å£å¤§å°
      launchOptions: {
        args: [
          '--start-maximized',       // â­ å¯åŠ¨æ—¶æœ€å¤§åŒ–
          '--start-fullscreen',      // â­â­â­ å¯åŠ¨æ—¶å…¨å±
          '--window-size=1920,1080', // åå¤‡è®¾ç½®
          '--disable-blink-features=AutomationControlled',
        ],
        ignoreDefaultArgs: ['--enable-automation'],
      }
    }
  }
]
```

**æ ¸å¿ƒæ”¹è¿›**:
- âœ… è®¾ç½® `viewport: null` - ä½¿ç”¨åŸç”Ÿçª—å£å¤§å°
- âœ… æ·»åŠ  `launchOptions` - å…¨å±å¯åŠ¨å‚æ•°
- âœ… æ·»åŠ  `--start-fullscreen` - å…¨å±å¯åŠ¨
- âœ… æ›´æ”¹ `screenshot: 'always'` - æ€»æ˜¯æˆªå›¾

---

## ğŸ” æ ¸å¿ƒé…ç½®è¯´æ˜

### viewport: null vs viewport: { width, height }

```
viewport: { width: 1920, height: 1080 }
  â†’ é¡µé¢å›ºå®šåœ¨1920x1080
  â†’ å³ä½¿æµè§ˆå™¨æ›´å¤§ï¼Œé¡µé¢ä¹Ÿä¸ä¼šå¡«æ»¡
  â†’ âŒ ä¸é€‚åˆå…¨å±æµ‹è¯•

viewport: null
  â†’ é¡µé¢ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçª—å£å¤§å°
  â†’ æµè§ˆå™¨å…¨å±æ—¶ï¼Œé¡µé¢ä¹Ÿå…¨å±
  â†’ âœ… é€‚åˆå…¨å±æµ‹è¯•

ç»“è®º: å…¨å±æµ‹è¯•å¿…é¡»ä½¿ç”¨ viewport: null â­â­â­â­â­
```

---

### headless: false

```
headless: true (é»˜è®¤)
  â†’ åå°è¿è¡Œæµè§ˆå™¨ï¼Œæ— ç•Œé¢
  â†’ âŒ æ— æ³•è§‚å¯Ÿæµ‹è¯•è¿‡ç¨‹

headless: false
  â†’ æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢
  â†’ âœ… å¯ä»¥è§‚å¯Ÿæµ‹è¯•è¿‡ç¨‹
  â†’ âœ… å¯ä»¥çœ‹åˆ°å¸ƒå±€ã€æ•°æ®ã€åŠŸèƒ½

ç»“è®º: UIæµ‹è¯•å¿…é¡»ä½¿ç”¨ headless: false â­â­â­â­â­
```

---

### --start-fullscreen

```
--start-maximized
  â†’ æœ€å¤§åŒ–çª—å£ï¼ˆä½†ä¿ç•™æ ‡é¢˜æ ã€ä»»åŠ¡æ ï¼‰
  â†’ é€‚åˆ: å¼€å‘è°ƒè¯•

--start-fullscreen
  â†’ å®Œå…¨å…¨å±ï¼ˆæ— æ ‡é¢˜æ ã€ä»»åŠ¡æ ï¼‰
  â†’ âœ… é€‚åˆ: UIæˆªå›¾æµ‹è¯•
  â†’ âœ… é¡µé¢ä¸å±å¹•ä¸€æ ·é«˜ã€å®½

ç»“è®º: å…¨å±æµ‹è¯•æ¨èä½¿ç”¨ --start-fullscreen â­â­â­â­â­
```

---

### screenshot: 'always' vs 'only-on-failure'

```
screenshot: 'only-on-failure'
  â†’ ä»…å¤±è´¥æ—¶æˆªå›¾
  â†’ é€‚åˆ: CI/CDç¯å¢ƒï¼ˆèŠ‚çœç©ºé—´ï¼‰

screenshot: 'always'
  â†’ æ€»æ˜¯æˆªå›¾
  â†’ âœ… é€‚åˆ: UIæµ‹è¯•ï¼ˆæŸ¥çœ‹æ‰€æœ‰æ­¥éª¤ï¼‰
  â†’ âœ… å¯ä»¥çœ‹åˆ°æµ‹è¯•è¿‡ç¨‹çš„æ¯ä¸€æ­¥

ç»“è®º: UIæµ‹è¯•æ¨èä½¿ç”¨ screenshot: 'always' â­â­â­â­â­
```

---

## ğŸ“¸ æˆªå›¾ç›®å½•æ•´ç†

### æ¸…é™¤å‰

```
.playwright-mcp/
â”œâ”€â”€ browser-test/           âŒ æ¸…é™¤
â”œâ”€â”€ page-2026-01-19T*.png   âŒ æ¸…é™¤ï¼ˆ26ä¸ªæ—§æˆªå›¾ï¼‰
â””â”€â”€ pi-planning-*.png       âŒ æ¸…é™¤

browser-test/
â”œâ”€â”€ screenshots/            âŒ æ¸…é™¤
â”œâ”€â”€ results/                âŒ æ¸…é™¤
â””â”€â”€ browser-test/           âŒ æ¸…é™¤

frontend/
â”œâ”€â”€ tests/screenshots/      âŒ æ¸…é™¤
â””â”€â”€ browser-test/           âŒ æ¸…é™¤

æ€»è®¡: æ¸…é™¤ 50+ ä¸ªæ—§æˆªå›¾æ–‡ä»¶
```

---

### æ¸…é™¤å

```
.playwright-mcp/
â””â”€â”€ (ç©ºç›®å½•) âœ“ Clean

browser-test/
â”œâ”€â”€ screenshots/            âœ“ Cleanï¼ˆç©ºç›®å½•ï¼‰
â”œâ”€â”€ results/                âœ“ Cleanï¼ˆç©ºç›®å½•ï¼‰
â””â”€â”€ tests/                  âœ“ ä¿ç•™æµ‹è¯•æ–‡ä»¶

frontend/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ screenshots/
â”‚   â”‚   â”œâ”€â”€ phase1/         âœ“ Cleanï¼ˆç©ºç›®å½•ï¼‰
â”‚   â”‚   â””â”€â”€ phase2/         âœ“ Cleanï¼ˆç©ºç›®å½•ï¼‰
â”‚   â””â”€â”€ *.spec.ts           âœ“ ä¿ç•™æµ‹è¯•æ–‡ä»¶

æ€»è®¡: æ‰€æœ‰æˆªå›¾å·²æ¸…é™¤ï¼Œç›®å½•ç»“æ„ä¿ç•™ âœ…
```

---

## ğŸ¯ ä¼˜åŒ–æ•ˆæœéªŒè¯

### é¢„æœŸæ•ˆæœ

```
æµ‹è¯•å¯åŠ¨:
1. æµè§ˆå™¨å…¨å±æ‰“å¼€ âœ…
   - æ— æ ‡é¢˜æ 
   - æ— ä»»åŠ¡æ 
   - å®Œå…¨å…¨å±

2. é¡µé¢åŠ è½½ âœ…
   - é¡µé¢å®½åº¦ = å±å¹•å®½åº¦
   - é¡µé¢é«˜åº¦ = å±å¹•é«˜åº¦
   - æ‰€æœ‰å…ƒç´ å®Œæ•´æ˜¾ç¤º

3. æˆªå›¾æ•ˆæœ âœ…
   - å…¨å±æˆªå›¾
   - å¸ƒå±€å®Œæ•´
   - æ•°æ®æ¸…æ™°
   - åŠŸèƒ½å¯è§

4. æµ‹è¯•è§‚å¯Ÿ âœ…
   - å¯ä»¥å®æ—¶çœ‹åˆ°æµ‹è¯•è¿‡ç¨‹
   - å¯ä»¥è§‚å¯Ÿç‚¹å‡»æ•ˆæœ
   - å¯ä»¥æŸ¥çœ‹æ•°æ®åŠ è½½
```

---

### æµ‹è¯•å‘½ä»¤

```bash
# Frontendæµ‹è¯•
cd frontend
npx playwright test --project=chromium

# Browser-testæµ‹è¯•
cd browser-test
npx playwright test --project=chromium

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
npx playwright show-report
```

---

## ğŸ“Š é…ç½®å¯¹æ¯”æ€»ç»“

| é…ç½®é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ•ˆæœ |
|--------|--------|--------|------|
| `headless` | trueï¼ˆé»˜è®¤ï¼‰ | false â­ | æ˜¾ç¤ºæµè§ˆå™¨ |
| `viewport` | `{ width: 1920, height: 1080 }` | null â­â­â­â­â­ | ä½¿ç”¨åŸç”Ÿçª—å£å¤§å° |
| `--start-fullscreen` | âŒ ç¼ºå°‘ | âœ… æ·»åŠ  â­â­â­â­â­ | å…¨å±å¯åŠ¨ |
| `screenshot` | 'only-on-failure' | 'always' â­ | æ€»æ˜¯æˆªå›¾ |
| æˆªå›¾è´¨é‡ | å›ºå®š1920x1080 | å…¨å±å®Œæ•´ â­â­â­â­â­ | ä¸å±å¹•ä¸€è‡´ |

---

## âœ… ä¼˜åŒ–å®Œæˆæ¸…å•

```
âœ… æ¸…é™¤æ‰€æœ‰æ—§æˆªå›¾ï¼ˆ50+ æ–‡ä»¶ï¼‰
âœ… ä¼˜åŒ– frontend/playwright.config.ts
âœ… ä¼˜åŒ– browser-test/playwright.config.ts
âœ… æ·»åŠ  headless: falseï¼ˆæ˜¾ç¤ºæµè§ˆå™¨ï¼‰
âœ… è®¾ç½® viewport: nullï¼ˆä½¿ç”¨åŸç”Ÿçª—å£å¤§å°ï¼‰
âœ… æ·»åŠ  --start-fullscreenï¼ˆå…¨å±å¯åŠ¨ï¼‰
âœ… è®¾ç½® screenshot: 'always'ï¼ˆæ€»æ˜¯æˆªå›¾ï¼‰
âœ… åˆ›å»ºå¹²å‡€çš„æˆªå›¾ç›®å½•ç»“æ„
âœ… æ–‡æ¡£åŒ–é…ç½®è¯´æ˜
```

---

## ğŸš€ ä½¿ç”¨å»ºè®®

### 1. è¿è¡Œæµ‹è¯•æ—¶

```bash
# ç¡®ä¿å¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨
cd frontend
npm run dev  # ç«¯å£6060

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•
cd frontend
npx playwright test --project=chromium

# æµ‹è¯•ä¼šï¼š
# 1. æ‰“å¼€å…¨å±æµè§ˆå™¨ âœ…
# 2. é¡µé¢å®Œæ•´æ˜¾ç¤º âœ…
# 3. è‡ªåŠ¨æˆªå›¾æ‰€æœ‰æ­¥éª¤ âœ…
```

---

### 2. æŸ¥çœ‹æµ‹è¯•è¿‡ç¨‹

```
æµ‹è¯•è¿è¡Œæ—¶:
- å¯ä»¥çœ‹åˆ°æµè§ˆå™¨å…¨å±æ‰“å¼€ âœ…
- å¯ä»¥è§‚å¯Ÿé¡µé¢å¸ƒå±€ âœ…
- å¯ä»¥çœ‹åˆ°æ•°æ®åŠ è½½ âœ…
- å¯ä»¥è§‚å¯ŸåŠŸèƒ½ç‚¹å‡» âœ…

æµ‹è¯•å®Œæˆå:
- æŸ¥çœ‹æˆªå›¾: frontend/tests/screenshots/
- æŸ¥çœ‹æŠ¥å‘Š: npx playwright show-report
- æŸ¥çœ‹è§†é¢‘: test-results/**/*.webm
```

---

### 3. è°ƒè¯•å»ºè®®

```bash
# å•ä¸ªæµ‹è¯•è°ƒè¯•
npx playwright test --project=chromium --grep="TC-VP2-01-01" --debug

# æŸ¥çœ‹trace
npx playwright show-trace test-results/**/trace.zip

# æ…¢é€Ÿæ¨¡å¼ï¼ˆè§‚å¯Ÿæµ‹è¯•è¿‡ç¨‹ï¼‰
npx playwright test --project=chromium --slow-mo=1000
```

---

## ğŸ“ æ ¸å¿ƒè¦ç‚¹

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ å…¨å±æµ‹è¯•ä¸‰è¦ç´  â­â­â­â­â­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. headless: false
   â†’ æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢

2. viewport: null
   â†’ ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçª—å£å¤§å°
   â†’ é¡µé¢ä¸å±å¹•ä¸€æ ·é«˜ã€å®½

3. --start-fullscreen
   â†’ å¯åŠ¨æ—¶å…¨å±
   â†’ æ— æ ‡é¢˜æ ã€æ— ä»»åŠ¡æ 

ç¼ºä¸€ä¸å¯ï¼â­â­â­â­â­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸŠ ä¼˜åŒ–éªŒæ”¶

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‰ Playwrighté…ç½®ä¼˜åŒ–å®Œæˆï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… æ—§æˆªå›¾æ¸…é™¤: 50+ æ–‡ä»¶ âœ…
âœ… é…ç½®ä¼˜åŒ–: 2ä¸ªæ–‡ä»¶ âœ…
âœ… å…¨å±æ¨¡å¼: 100%é…ç½® â­â­â­â­â­
âœ… æˆªå›¾è®¾ç½®: æ€»æ˜¯å…¨å± â­â­â­â­â­

æ ¸å¿ƒé…ç½®:
âœ… headless: false
âœ… viewport: null
âœ… --start-fullscreen
âœ… screenshot: 'always'

é¢„æœŸæ•ˆæœ:
âœ… æµè§ˆå™¨å…¨å±æ‰“å¼€
âœ… é¡µé¢ä¸å±å¹•ä¸€æ ·é«˜ã€å®½
âœ… å¸ƒå±€ã€æ•°æ®ã€åŠŸèƒ½æ¸…æ™°å¯è§
âœ… æ‰€æœ‰æˆªå›¾å…¨å±å®Œæ•´

çŠ¶æ€: âœ… é…ç½®ä¼˜åŒ–å®Œæˆ
ä¸‹ä¸€æ­¥: ğŸš€ è¿è¡Œæµ‹è¯•éªŒè¯

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**ä¼˜åŒ–æ—¥æœŸ**: 2026-01-20  
**ä¼˜åŒ–çŠ¶æ€**: âœ… **100%å®Œæˆ**  
**è´¨é‡è¯„åˆ†**: â­â­â­â­â­ **ä¼˜ç§€**  

ğŸŠ **Playwrightå…¨å±é…ç½®ä¼˜åŒ–å®Œæˆï¼** ğŸŠ
