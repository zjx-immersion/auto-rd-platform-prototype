# PI Planning 页面导航测试清单

> **测试日期**: 2026-01-20  
> **修复版本**: commit 541dbe4  
> **测试人员**: _________

---

## 📋 测试环境

- [ ] 前端服务已启动 (`npm run dev`)
- [ ] 访问地址: http://localhost:6060
- [ ] 浏览器: Chrome/Firefox/Safari
- [ ] 浏览器开发者工具Console已打开（查看错误）

---

## 🧪 测试场景

### 场景1: 从PI Planning看板进入全局视角

**步骤**:
1. [ ] 访问 `http://localhost:6060/function/c3/pi-planning-board`
2. [ ] 从下拉框选择一个PI（如"PI 2026-01"）
3. [ ] 点击右上角"进入规划工作台"按钮

**预期结果**:
- [ ] ✅ 页面自动导航到 `/function/c3/planning/pi/pi-001/stage1`
- [ ] ✅ 显示全局视角页面标题："PI Planning - 全局视角: Feature/SSTS排布"
- [ ] ✅ 显示提示消息："已进入规划工作台（全局视角）"
- [ ] ✅ 页面显示完整的三栏布局（待分配、智能分配、团队×Sprint）

**实际结果**: _________

---

### 场景2: 全局视角功能验证

**步骤**:
1. [ ] 在全局视角页面
2. [ ] 检查右上角按钮组

**预期结果**:
- [ ] ✅ 有"返回PI看板"按钮（ArrowLeft图标）
- [ ] ✅ 有"保存"按钮（Document图标）
- [ ] ✅ 有"切换到团队视角"按钮（UserFilled图标）
- [ ] ✅ 有"检测冲突"按钮（Warning图标）

**实际结果**: _________

---

### 场景3: 全局视角保存功能

**步骤**:
1. [ ] 在全局视角页面
2. [ ] 从左侧拖拽一个Feature到右侧团队×Sprint矩阵
3. [ ] 点击"保存"按钮

**预期结果**:
- [ ] ✅ 显示提示消息："草稿已保存"
- [ ] ✅ 刷新页面后，分配的Feature仍然存在（从localStorage加载）

**实际结果**: _________

---

### 场景4: 全局视角切换到团队视角

**步骤**:
1. [ ] 在全局视角页面
2. [ ] 点击"切换到团队视角"按钮

**预期结果**:
- [ ] ✅ 页面导航到 `/function/c3/planning/pi/pi-001/stage2`
- [ ] ✅ 显示团队视角页面标题："PI Planning - 团队视角: 模块需求排布"
- [ ] ✅ 显示团队选择区域（Radio按钮组）
- [ ] ✅ 显示两栏布局（特性树、Sprint列表）

**实际结果**: _________

---

### 场景5: 团队视角功能验证

**步骤**:
1. [ ] 在团队视角页面
2. [ ] 检查按钮组

**预期结果**:
- [ ] ✅ 左上角有"返回PI看板"按钮（ArrowLeft图标）
- [ ] ✅ 右上角有"保存"按钮（Document图标）
- [ ] ✅ 右上角有"切换到全局视角"按钮（FolderOpened图标）
- [ ] ✅ 团队选择卡片右上角也有"切换到全局视角"按钮

**实际结果**: _________

---

### 场景6: 团队视角保存功能

**步骤**:
1. [ ] 在团队视角页面
2. [ ] 选择一个团队（如"ACC团队"）
3. [ ] 从左侧特性树拖拽一个MR到右侧Sprint
4. [ ] 点击"保存"按钮

**预期结果**:
- [ ] ✅ 显示提示消息："草稿已保存"
- [ ] ✅ 刷新页面后，分配的MR仍然存在（从localStorage加载）

**实际结果**: _________

---

### 场景7: 团队视角切换到全局视角

**步骤**:
1. [ ] 在团队视角页面
2. [ ] 点击右上角"切换到全局视角"按钮

**预期结果**:
- [ ] ✅ 页面导航到 `/function/c3/planning/pi/pi-001/stage1`
- [ ] ✅ 返回到全局视角页面
- [ ] ✅ 之前在全局视角的分配数据仍然存在

**实际结果**: _________

---

### 场景8: 从全局视角返回PI看板

**步骤**:
1. [ ] 在全局视角页面
2. [ ] 点击左上角"返回PI看板"按钮

**预期结果**:
- [ ] ✅ 页面导航到 `/function/c3/pi-planning-board`
- [ ] ✅ 返回到PI Planning看板页面
- [ ] ✅ 之前选择的PI仍然被选中
- [ ] ✅ 显示"进入规划工作台"或"提交规划"按钮（取决于规划状态）

**实际结果**: _________

---

### 场景9: 从团队视角返回PI看板

**步骤**:
1. [ ] 在团队视角页面
2. [ ] 点击左上角"返回PI看板"按钮

**预期结果**:
- [ ] ✅ 页面导航到 `/function/c3/pi-planning-board`
- [ ] ✅ 返回到PI Planning看板页面
- [ ] ✅ 之前选择的PI仍然被选中

**实际结果**: _________

---

### 场景10: 多次视角切换

**步骤**:
1. [ ] PI看板 → 进入规划工作台 → 全局视角
2. [ ] 全局视角 → 切换到团队视角
3. [ ] 团队视角 → 切换到全局视角
4. [ ] 全局视角 → 切换到团队视角
5. [ ] 团队视角 → 返回PI看板

**预期结果**:
- [ ] ✅ 每次切换都导航到正确的页面
- [ ] ✅ 不出现404或空白页面
- [ ] ✅ Console无错误
- [ ] ✅ 数据保持一致

**实际结果**: _________

---

## 🐛 边界情况测试

### 边界1: 直接URL访问

**步骤**:
1. [ ] 直接在浏览器输入 `http://localhost:6060/function/c3/planning/pi/pi-001/stage1`
2. [ ] 点击"返回PI看板"按钮

**预期结果**:
- [ ] ✅ 全局视角页面正常加载
- [ ] ✅ "返回PI看板"按钮工作正常
- [ ] ✅ 返回到 `/function/c3/pi-planning-board`（而不是空白页）

**实际结果**: _________

---

### 边界2: 浏览器后退按钮

**步骤**:
1. [ ] PI看板 → 全局视角 → 团队视角
2. [ ] 点击浏览器的后退按钮

**预期结果**:
- [ ] ✅ 返回到全局视角（而不是跳过全局视角）
- [ ] ✅ 数据正常显示

**实际结果**: _________

---

### 边界3: 未选择PI的情况

**步骤**:
1. [ ] 访问PI Planning看板
2. [ ] 不选择PI
3. [ ] 点击"进入规划工作台"按钮

**预期结果**:
- [ ] ✅ 显示警告消息："请先选择PI"
- [ ] ✅ 不导航到其他页面

**实际结果**: _________

---

## 🎯 性能测试

### 性能1: 导航速度

**步骤**:
1. [ ] 在各个页面之间多次切换
2. [ ] 观察页面加载速度

**预期结果**:
- [ ] ✅ 页面切换流畅，无明显卡顿
- [ ] ✅ 数据加载快速（< 1秒）

**实际结果**: _________

---

### 性能2: 数据持久化

**步骤**:
1. [ ] 在全局视角分配10个Feature
2. [ ] 点击"保存"
3. [ ] 刷新浏览器
4. [ ] 重新进入全局视角

**预期结果**:
- [ ] ✅ 所有分配的Feature仍然存在
- [ ] ✅ 数据从localStorage正确加载

**实际结果**: _________

---

## 📱 浏览器兼容性测试

### Chrome
- [ ] ✅ 所有功能正常
- [ ] 问题: _________

### Firefox
- [ ] ✅ 所有功能正常
- [ ] 问题: _________

### Safari
- [ ] ✅ 所有功能正常
- [ ] 问题: _________

---

## ✅ 验证总结

### 测试通过率
- 通过场景数: _____ / 10
- 边界测试通过: _____ / 3
- 性能测试通过: _____ / 2
- 浏览器兼容: _____ / 3

### 发现的问题
1. _________
2. _________
3. _________

### 建议改进
1. _________
2. _________
3. _________

---

## 📝 测试结论

- [ ] ✅ 所有测试通过，可以上线
- [ ] ⚠️ 部分测试未通过，需要修复
- [ ] ❌ 严重问题，需要重新开发

**测试人员签名**: _________  
**测试日期**: _________  
**测试用时**: _________

---

## 🎯 快速测试流程

如果时间有限，可以只测试以下关键场景：

### 核心流程（必测）
1. [ ] ✅ 场景1: PI看板 → 全局视角
2. [ ] ✅ 场景4: 全局视角 → 团队视角
3. [ ] ✅ 场景8: 全局视角 → 返回PI看板
4. [ ] ✅ 场景9: 团队视角 → 返回PI看板

### 关键功能（必测）
5. [ ] ✅ 场景3: 全局视角保存
6. [ ] ✅ 场景6: 团队视角保存

**快速测试通过率**: _____ / 6

---

**测试清单版本**: V1.0  
**最后更新**: 2026-01-20
