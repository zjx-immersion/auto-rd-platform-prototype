# C3-F14: 风险缓解

> **功能编号**: C3-F14  
> **功能名称**: 风险缓解  
> **所属模块**: C3-规划协调  
> **优先级**: P1  
> **设计日期**: 2026-01-17

---

## 一、功能概述

### 1.1 功能定位
风险缓解负责为已评估的高风险制定和执行应对策略，降低风险概率或影响。

### 1.2 核心价值
- ✅ 4种标准缓解策略
- ✅ 措施制定和跟踪
- ✅ 应急预案管理
- ✅ 措施有效性评估
- ✅ 成本效益分析

---

## 二、页面设计

### 2.1 风险缓解页面
```
┌──────────────────────────────────────────────────────────────┐
│ 风险缓解 > R-T01: 新技术栈不成熟              [保存] [提交] │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ ┌─ 风险评估结果 ────────────────────────────────────────┐  │
│ │ 风险等级: 🔴 高  概率: 60%  影响: 高  风险值: 1.8     │  │
│ │ 优先级: P1 (需要优先缓解)                              │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 缓解策略选择 ────────────────────────────────────────┐  │
│ │ ⚫ 减轻(Mitigate)  ○ 规避(Avoid)                        │  │
│ │ ○ 转移(Transfer)  ○ 接受(Accept)                       │  │
│ │                                                          │  │
│ │ 策略说明:                                                │  │
│ │ 减轻: 通过降级到React 18稳定版，降低技术风险概率和影响│  │
│ │ 目标: 将概率从60%降到20%，影响从高降到中               │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 缓解措施 ────────────────────────────────────────────┐  │
│ │                                          [+ 添加措施]   │  │
│ │                                                          │  │
│ │ 措施1: 降级到React 18稳定版               [主要措施]   │  │
│ │ ├────────────────────────────────────────────────┤    │  │
│ │ │ 描述: 将技术栈从React 19 beta降级到React 18.2    │    │  │
│ │ │       LTS版本，确保稳定性                          │    │  │
│ │ │                                                    │    │  │
│ │ │ 负责人: [王五(架构师) ▾]                           │    │  │
│ │ │ 开始日期: [2024-09-25]  目标日期: [2024-10-05]    │    │  │
│ │ │ 工作量: [40] 小时  成本: [¥20,000]                │    │  │
│ │ │                                                    │    │  │
│ │ │ 详细步骤:                                          │    │  │
│ │ │ ☐ 评估React 19特性使用情况 (8h)                   │    │  │
│ │ │ ☐ 准备降级方案和兼容性分析 (16h)                  │    │  │
│ │ │ ☐ 执行降级和测试 (16h)                            │    │  │
│ │ │                                                    │    │  │
│ │ │ 预期效果:                                          │    │  │
│ │ │ • 概率降低: 60% → 20% (降低40%)                   │    │  │
│ │ │ • 影响降低: 高 → 中 (降低1级)                     │    │  │
│ │ │ • 风险值: 1.8 → 0.6 (降低67%)                     │    │  │
│ │ │                                                    │    │  │
│ │ │ 状态: 📝 计划中  进度: 0%                         │    │  │
│ │ │ [编辑] [删除] [开始执行]                          │    │  │
│ │ └────────────────────────────────────────────────┘    │  │
│ │                                                          │  │
│ │ 措施2: 增加技术原型验证              [辅助措施]         │  │
│ │ ├────────────────────────────────────────────────┤    │  │
│ │ │ 描述: 在降级前，用React 18做完整技术原型验证      │    │  │
│ │ │ 负责人: 李四  工作量: 24h  成本: ¥12,000          │    │  │
│ │ │ 状态: ✓ 已完成  有效性: 85%                       │    │  │
│ │ └────────────────────────────────────────────────┘    │  │
│ │                                                          │  │
│ │ 措施3: 加强测试覆盖               [支持措施]            │  │
│ │ └────────────────────────────────────────────────┘    │  │
│ │                                                          │  │
│ │ 总成本: ¥50,000  总工作量: 80小时                      │  │
│ │ 成本效益比: 1:15 (降低风险价值¥750,000)                │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 应急预案 ────────────────────────────────────────────┐  │
│ │ 如果风险实际发生，启动以下应急预案:                     │  │
│ │                                                          │  │
│ │ Plan A (优先):                                           │  │
│ │ • 使用React 18备份方案立即切换                          │  │
│ │ • 预计切换时间: 2天                                      │  │
│ │ • 影响: Feature延期3-5天                                │  │
│ │                                                          │  │
│ │ Plan B (备选):                                           │  │
│ │ • 隔离问题模块，其他模块继续                            │  │
│ │ • 调整Sprint目标，先交付核心功能                        │  │
│ │ • 影响: 部分Feature移到下个Sprint                       │  │
│ │                                                          │  │
│ │ 触发条件:                                                │  │
│ │ • React 19导致系统崩溃                                  │  │
│ │ • 发现严重性能问题无法解决                              │  │
│ │ • Bug修复时间超过3天                                    │  │
│ │                                                          │  │
│ │ 决策人: 张三(PM)  执行人: 王五(架构师)                  │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 缓解效果预测 ────────────────────────────────────────┐  │
│ │                                                          │  │
│ │ 缓解前: 概率60% × 影响高(3) = 风险值1.8 (高风险)       │  │
│ │                ↓ 实施3项缓解措施                        │  │
│ │ 缓解后: 概率20% × 影响中(2) = 风险值0.4 (低风险)       │  │
│ │                                                          │  │
│ │ 残余风险: 0.4 (可接受范围)                              │  │
│ │ 缓解有效性: 78% (高)                                     │  │
│ │                                                          │  │
│ │ ┌─ 风险值变化 ────────┐                                │  │
│ │ │ 1.8 ┤●                │                                │  │
│ │ │     │ ╲               │  措施1实施后                   │  │
│ │ │ 1.2 │   ●             │  ↓                             │  │
│ │ │     │    ╲            │  措施2实施后                   │  │
│ │ │ 0.6 │      ●          │  ↓                             │  │
│ │ │     │       ╲         │  所有措施完成                  │  │
│ │ │ 0.4 │         ●       │  ↓                             │  │
│ │ │     └─────────────────┤                                │  │
│ │ │     0  1  2  3  完成  │                                │  │
│ │ └───────────────────────┘                                │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 三、数据模型

```typescript
interface RiskMitigation {
  id: string;
  riskId: string;
  
  // 策略
  strategy: 'avoid' | 'transfer' | 'mitigate' | 'accept';
  strategyRationale: string;
  
  // 目标
  targetProbability: number;
  targetImpact: number;
  targetRiskScore: number;
  
  // 缓解措施
  actions: MitigationAction[];
  
  // 应急预案
  contingencyPlan: {
    planA: {
      description: string;
      switchTime: number;  // 小时
      impact: string;
    };
    planB?: {
      description: string;
      switchTime: number;
      impact: string;
    };
    triggers: string[];
    decisionMaker: string;
    executor: string;
  };
  
  // 成本
  totalCost: number;
  totalEffort: number;  // 小时
  
  // 效果
  expectedEffectiveness: number;  // 0-1
  residualRisk: number;
  costBenefitRatio: number;
  
  // 状态
  status: 'planned' | 'in_progress' | 'completed' | 'on_hold';
  approver: string;
  approvedDate?: Date;
}

interface MitigationAction {
  id: string;
  title: string;
  description: string;
  type: 'primary' | 'secondary' | 'supporting';
  
  // 责任
  owner: string;
  startDate: Date;
  targetDate: Date;
  
  // 资源
  effort: number;  // 小时
  cost: number;
  
  // 步骤
  steps: {
    description: string;
    effort: number;
    status: 'todo' | 'in_progress' | 'done';
  }[];
  
  // 预期效果
  expectedProbabilityReduction: number;
  expectedImpactReduction: number;
  expectedEffectiveness: number;  // 0-1
  
  // 实际效果
  actualEffectiveness?: number;
  
  // 状态
  status: 'planned' | 'in_progress' | 'completed' | 'failed';
  progress: number;  // 0-100
}
```

---

## 四、API接口

```typescript
// 创建缓解计划
POST /api/risks/{riskId}/mitigation
Request: RiskMitigation

// 添加缓解措施
POST /api/mitigation/{mitigationId}/actions
Request: MitigationAction

// 更新措施进度
PUT /api/mitigation/actions/{actionId}/progress
Request: { progress: number, notes: string }

// 评估缓解效果
POST /api/mitigation/{mitigationId}/evaluate
Request: {
  actualProbability: number;
  actualImpact: number;
  effectiveness: number;
}

// 成本效益分析
GET /api/mitigation/{mitigationId}/cost-benefit

// 批准缓解计划
POST /api/mitigation/{mitigationId}/approve
```

---

## 五、业务规则

### 5.1 缓解策略选择

**规避 (Avoid)**:
- 改变计划，消除风险
- 适用: 高概率高影响的灾难性风险
- 示例: 放弃使用不成熟技术

**转移 (Transfer)**:
- 将风险转移给第三方
- 适用: 专业性强的风险
- 示例: 外包、保险、合同条款

**减轻 (Mitigate)**:
- 降低概率或影响
- 适用: 大多数可控风险
- 示例: 增加资源、加强测试

**接受 (Accept)**:
- 不采取主动措施
- 适用: 低风险或缓解成本过高
- 要求: 必须有应急预案

### 5.2 措施优先级

```
优先级 = 
  风险等级权重 × 0.5 +
  成本效益比权重 × 0.3 +
  实施难度权重 × 0.2

按优先级排序措施
```

### 5.3 成本效益分析

```
风险价值 = 概率 × 影响 × 项目价值
缓解成本 = sum(措施成本)
风险降低价值 = (原风险值 - 残余风险值) × 项目价值
成本效益比 = 风险降低价值 / 缓解成本

建议:
if 成本效益比 > 3: 强烈建议实施
if 1 < 成本效益比 <= 3: 建议实施
if 成本效益比 <= 1: 需要重新评估
```

### 5.4 缓解效果评估

```
预期效果 = 
  (原概率 - 目标概率) / 原概率 × 0.5 +
  (原影响 - 目标影响) / 原影响 × 0.5

实际效果 = 
  (原风险值 - 实际风险值) / 原风险值

缓解成功标准:
实际效果 >= 预期效果 × 0.8
```

---

## 六、交互设计

### 6.1 措施制定向导

Step 1: 选择策略
Step 2: 添加主要措施
Step 3: 添加辅助措施
Step 4: 制定应急预案
Step 5: 成本效益分析
Step 6: 提交审批

### 6.2 措施执行跟踪

- Gantt图显示措施时间线
- 实时更新执行进度
- 里程碑提醒
- 延期预警

### 6.3 效果可视化

- 风险值下降曲线
- 措施贡献度饼图
- 成本效益对比柱图

---

## 七、测试要点

- [x] 策略选择
- [x] 措施添加和编辑
- [x] 应急预案制定
- [x] 成本效益计算
- [x] 缓解效果预测
- [x] 审批流程
- [x] 执行跟踪

---

**设计完成日期**: 2026-01-17  
**设计状态**: ✅ 已完成
