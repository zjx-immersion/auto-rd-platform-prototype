# C3-F12: 风险识别

> **功能编号**: C3-F12  
> **功能名称**: 风险识别  
> **所属模块**: C3-规划协调  
> **优先级**: P1  
> **设计日期**: 2026-01-17

---

## 一、功能概述

### 1.1 功能定位
风险识别是系统化地发现和记录PI/项目中的潜在风险，建立风险登记册。

### 1.2 核心价值
- ✅ 系统化风险识别方法
- ✅ 风险类型分类管理
- ✅ 智能风险识别辅助
- ✅ 风险模板库
- ✅ 团队协作识别

---

## 二、页面设计

### 2.1 风险识别主页面
```
┌──────────────────────────────────────────────────────────────┐
│ PI 2024.4 > 风险识别                  [+ 新增风险] [批量导入]│
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ ┌─ 识别方法选择 ────────────────────────────────────────┐  │
│ │ ⚫ 头脑风暴  ○ 检查清单  ○ 历史数据分析  ○ 专家访谈  │  │
│ │ ○ 智能识别  ○ 自由添加                                │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 风险分类视图 ────────────────────────────────────────┐  │
│ │                                                          │  │
│ │ 🔧 技术风险 (5个)                      [展开 ▾]         │  │
│ │ ├────────────────────────────────────────────────┤    │  │
│ │ │ R-T01: 新技术栈不成熟                             │    │  │
│ │ │ 描述: React 19 beta版本存在未知Bug                │    │  │
│ │ │ 来源: 技术评审会议  识别人: 王五(架构师)         │    │  │
│ │ │ 识别日期: 2024-09-20  状态: 📝 新识别            │    │  │
│ │ │ [评估] [编辑] [删除]                              │    │  │
│ │ ├────────────────────────────────────────────────┤    │  │
│ │ │ R-T02: 传感器数据处理性能瓶颈                    │    │  │
│ │ │ [评估] [编辑]                                     │    │  │
│ │ └────────────────────────────────────────────────┘    │  │
│ │                                                          │  │
│ │ 👥 资源风险 (3个)                      [展开 ▾]         │  │
│ │ ├────────────────────────────────────────────────┤    │  │
│ │ │ R-R01: 关键人员休假                              │    │  │
│ │ │ R-R02: 团队人员流失                              │    │  │
│ │ │ R-R03: 供应商交付延期                            │    │  │
│ │ └────────────────────────────────────────────────┘    │  │
│ │                                                          │  │
│ │ 🔗 依赖风险 (4个)  📅 进度风险 (2个)  ✅ 质量风险 (3个)│  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 智能风险识别建议 ────────────────────────────────────┐  │
│ │ 💡 基于历史数据和当前项目特征，发现3个潜在风险：      │  │
│ │                                                          │  │
│ │ ⚠️ 建议1: Feature F-004依赖外部接口，历史上此类依赖   │  │
│ │          延期概率60%，建议识别为风险                  │  │
│ │          [采纳] [忽略]                                 │  │
│ │                                                          │  │
│ │ ⚠️ 建议2: 智驾团队负载率>85%，历史上高负载导致质量   │  │
│ │          问题概率40%                                    │  │
│ │          [采纳] [忽略]                                 │  │
│ │                                                          │  │
│ │ ⚠️ 建议3: S3和S4之间有3天国庆假期，可能影响进度      │  │
│ │          [采纳] [忽略]                                 │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌─ 风险检查清单 ────────────────────────────────────────┐  │
│ │ 技术风险检查 (12项):                                    │  │
│ │ ☐ 使用了新技术/框架                                     │  │
│ │ ☑ 第三方组件依赖                                        │  │
│ │ ☐ 性能/规模要求高                                       │  │
│ │ ☑ 系统集成复杂度高                                      │  │
│ │ ...                                                      │  │
│ │                                                          │  │
│ │ 资源风险检查 (8项):                                     │  │
│ │ ☑ 关键技能人员少于2人                                   │  │
│ │ ☑ 团队成员有计划休假                                    │  │
│ │ ☐ 外部资源依赖                                          │  │
│ │ ...                                                      │  │
│ └────────────────────────────────────────────────────┘  │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 三、数据模型

```typescript
interface RiskIdentification {
  id: string;
  piId: string;
  
  // 风险分类
  category: 'technical' | 'resource' | 'dependency' | 
            'schedule' | 'quality' | 'external' | 'other';
  
  // 基本信息
  title: string;
  description: string;
  
  // 识别信息
  identificationMethod: 'brainstorming' | 'checklist' | 
                       'historical' | 'expert' | 'ai' | 'manual';
  identifiedBy: string;
  identifiedDate: Date;
  source: string;  // 来源(会议/评审/系统分析等)
  
  // 关联
  relatedFeatures: string[];
  relatedDependencies: string[];
  relatedObjectives: string[];
  
  // 初步判断
  initialSeverity?: 'low' | 'medium' | 'high';
  potentialImpact?: string;
  
  // 状态
  status: 'identified' | 'under_assessment' | 'assessed' | 
          'duplicate' | 'invalid';
  
  // 标签
  tags: string[];
  
  // 审计
  createdAt: Date;
  updatedAt: Date;
}

// 风险模板
interface RiskTemplate {
  id: string;
  category: string;
  title: string;
  description: string;
  typicalImpact: string;
  commonMitigations: string[];
  checklist: string[];
  usageCount: number;
}
```

---

## 四、API接口

```typescript
// 创建风险
POST /api/pi/{piId}/risks
Request: RiskIdentification

// 获取风险列表
GET /api/pi/{piId}/risks
Query: category?, status?

// 智能识别建议
GET /api/pi/{piId}/risks/ai-suggestions

// 获取风险模板
GET /api/risks/templates
Query: category?

// 从模板创建风险
POST /api/pi/{piId}/risks/from-template
Request: { templateId: string, customizations: any }

// 批量导入风险
POST /api/pi/{piId}/risks/batch-import
Request: RiskIdentification[]

// 风险检查清单
GET /api/risks/checklist
Query: category?
```

---

## 五、业务规则

### 5.1 风险分类

**技术风险**:
- 新技术/框架
- 技术债务
- 性能/规模
- 集成复杂性
- 技术可行性

**资源风险**:
- 人员休假/流失
- 技能不足
- 资源冲突
- 供应商问题

**依赖风险**:
- 外部依赖延期
- 接口变更
- 第三方服务不稳定

**进度风险**:
- 估算偏差
- 范围蔓延
- 并行任务冲突

**质量风险**:
- 测试不充分
- 需求不明确
- 技术债务累积

### 5.2 识别方法

**头脑风暴**:
- 团队会议集中识别
- 鼓励开放讨论
- 记录所有提出的风险

**检查清单**:
- 按类别系统检查
- 基于历史经验总结
- 确保全面覆盖

**历史数据分析**:
- 分析类似项目风险
- 统计风险发生概率
- 参考历史缓解措施

**智能识别**:
- AI分析项目特征
- 匹配历史风险模式
- 提供识别建议

### 5.3 风险去重

```
if 两个风险标题相似度 > 80%:
  提示"可能重复"
  建议合并或确认不同
```

---

## 六、交互设计

### 6.1 快速添加风险

- 模板选择 → 自动填充 → 自定义 → 保存
- 支持拖拽排序
- 支持批量操作

### 6.2 智能建议采纳

- 一键采纳建议风险
- 自动关联相关对象
- 自动分类

### 6.3 协作识别

- 支持多人同时添加
- 实时显示其他人添加的风险
- 支持评论和讨论

---

## 七、测试要点

- [x] 风险创建和分类
- [x] 智能识别建议
- [x] 模板使用
- [x] 检查清单
- [x] 批量导入
- [x] 重复风险检测
- [x] 协作编辑

---

**设计完成日期**: 2026-01-17  
**设计状态**: ✅ 已完成
