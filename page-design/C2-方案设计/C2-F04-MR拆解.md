# C2-F04: MR拆解

> **功能编号**: C2-F04  
> **功能名称**: MR拆解 (Module Requirement)  
> **所属模块**: C2-方案设计  
> **所属流程**: P3-方案设计流程 (步骤3)  
> **优先级**: P0 (核心功能)  
> **设计日期**: 2025-01-15

---

## 一、功能概述

### 1.1 功能定位

MR拆解是方案设计流程（P3）的第三步，负责将SSTS拆解为模块需求（Module Requirement）。

### 1.2 核心价值

- ✅ 将系统需求转化为模块需求
- ✅ 定义模块功能和接口
- ✅ 支持模块级开发和测试
- ✅ 支撑后续Task拆解
- ✅ 符合ASPICE SWE.1标准

### 1.3 需求流转

```
Epic → Feature → PRD → SSTS → MR → Task
                        ↑      ↑
                     P2步骤3  P3步骤3 (当前)
```

### 1.4 用户角色

- **主要用户**: 架构师、技术负责人
- **次要用户**: 开发负责人
- **评审用户**: 技术委员会

---

## 二、页面设计

### 2.1 MR拆解主页面

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ P3: 方案设计流程 > 步骤3: MR拆解                                             │
│ 需求层级: 🔸 SSTS → 🔹 MR (模块需求)                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 需求流转路径                                                           │ │
│  │ Epic: E001 → Feature: F001 → PRD → SSTS-001 → MR拆解                  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ SSTS信息                                                               │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ SSTS ID: SSTS-001                                                │  │ │
│  │ │ SSTS名称: 环境感知子系统                                         │  │ │
│  │ │ 系统描述: 负责识别车位、检测障碍物、监控周围环境                 │  │ │
│  │ │ 技术规格: 4个摄像头 + 12个超声波雷达 + NVIDIA Jetson Xavier      │  │ │
│  │ │ [查看SSTS详情]                                                   │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 模块架构设计                                          [AI辅助拆解]     │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │                                                                  │  │ │
│  │ │  ┌──────────────────────────────────────────────────────────┐  │  │ │
│  │ │  │ SSTS-001: 环境感知子系统                                 │  │  │ │
│  │ │  └──────────────────────────────────────────────────────────┘  │  │ │
│  │ │                          │                                       │  │ │
│  │ │         ┌────────────────┼────────────────┬──────────────┐      │  │ │
│  │ │         │                │                │              │      │  │ │
│  │ │         ▼                ▼                ▼              ▼      │  │ │
│  │ │  ┌──────────┐     ┌──────────┐     ┌──────────┐  ┌──────────┐ │  │ │
│  │ │  │ 摄像头   │     │ 雷达     │     │ 图像处理 │  │ 数据融合 │ │  │ │
│  │ │  │ 模块     │     │ 模块     │     │ 模块     │  │ 模块     │ │  │ │
│  │ │  │ (MR-001) │     │ (MR-002) │     │ (MR-003) │  │ (MR-004) │ │  │ │
│  │ │  └──────────┘     └──────────┘     └──────────┘  └──────────┘ │  │ │
│  │ │                                                                  │  │ │
│  │ │  [编辑架构图]                                                    │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ MR列表                                                  [+ 添加MR]     │ │
│  │                                                                       │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ MR-001: 摄像头模块                                  [展开] [编辑] │  │ │
│  │ │ ┌───────────────────────────────────────────────────────────┐  │  │ │
│  │ │ │ 模块描述:                                                  │  │  │ │
│  │ │ │ 负责采集摄像头图像数据，支持4路摄像头输入                  │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 功能需求:                                                  │  │  │ │
│  │ │ │ - 支持4路1080P摄像头输入                                   │  │  │ │
│  │ │ │ - 图像采集帧率≥30fps                                       │  │  │ │
│  │ │ │ - 支持图像预处理（去噪、增强）                             │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 技术规格:                                                  │  │  │ │
│  │ │ │ - 硬件: MIPI CSI-2接口                                     │  │  │ │
│  │ │ │ - 软件: V4L2驱动 + OpenCV                                  │  │  │ │
│  │ │ │ - 处理器: NVIDIA Jetson Xavier (GPU加速)                   │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 接口定义:                                                  │  │  │ │
│  │ │ │ - 输入: 摄像头MIPI信号                                     │  │  │ │
│  │ │ │ - 输出: 图像数据流 (ROS Topic)                             │  │  │ │
│  │ │ │ - 接口协议: ROS2 DDS                                       │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 性能指标:                                                  │  │  │ │
│  │ │ │ - 延迟: ≤50ms                                              │  │  │ │
│  │ │ │ - CPU占用率: ≤20%                                          │  │  │ │
│  │ │ │ - 内存占用: ≤500MB                                         │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 复用决策: ☑ 复用现有模块 (Camera_Driver_V2.0)             │  │  │ │
│  │ │ └───────────────────────────────────────────────────────────┘  │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                       │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ MR-002: 雷达模块                                    [展开] [编辑] │  │ │
│  │ │ ┌───────────────────────────────────────────────────────────┐  │  │ │
│  │ │ │ 模块描述:                                                  │  │  │ │
│  │ │ │ 负责采集超声波雷达数据，支持12路雷达输入                   │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 功能需求:                                                  │  │  │ │
│  │ │ │ - 支持12路超声波雷达输入                                   │  │  │ │
│  │ │ │ - 检测距离: 0.3m - 5m                                      │  │  │ │
│  │ │ │ - 检测精度: ±3cm                                           │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 技术规格:                                                  │  │  │ │
│  │ │ │ - 硬件: CAN接口                                            │  │  │ │
│  │ │ │ - 软件: CAN驱动 + 数据解析                                 │  │  │ │
│  │ │ │ - 处理器: TI TDA4                                          │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 接口定义:                                                  │  │  │ │
│  │ │ │ - 输入: 雷达CAN信号                                        │  │  │ │
│  │ │ │ - 输出: 距离数据 (ROS Topic)                               │  │  │ │
│  │ │ │ - 接口协议: ROS2 DDS                                       │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 性能指标:                                                  │  │  │ │
│  │ │ │ - 延迟: ≤30ms                                              │  │  │ │
│  │ │ │ - CPU占用率: ≤10%                                          │  │  │ │
│  │ │ │ - 内存占用: ≤100MB                                         │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 复用决策: ☐ 新建模块                                       │  │  │ │
│  │ │ └───────────────────────────────────────────────────────────┘  │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                       │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ MR-003: 图像处理模块                                [展开] [编辑] │  │ │
│  │ │ ┌───────────────────────────────────────────────────────────┐  │  │ │
│  │ │ │ 模块描述:                                                  │  │  │ │
│  │ │ │ 负责图像处理和车位识别，基于深度学习算法                   │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 功能需求:                                                  │  │  │ │
│  │ │ │ - 车位检测和识别                                           │  │  │ │
│  │ │ │ - 障碍物检测                                               │  │  │ │
│  │ │ │ - 识别准确率≥95%                                           │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 技术规格:                                                  │  │  │ │
│  │ │ │ - 算法: YOLO v5 + 自定义后处理                             │  │  │ │
│  │ │ │ - 框架: PyTorch + TensorRT                                 │  │  │ │
│  │ │ │ - 处理器: NVIDIA Jetson Xavier (GPU加速)                   │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 接口定义:                                                  │  │  │ │
│  │ │ │ - 输入: 图像数据流 (ROS Topic)                             │  │  │ │
│  │ │ │ - 输出: 车位位置、障碍物位置 (ROS Topic)                   │  │  │ │
│  │ │ │ - 接口协议: ROS2 DDS                                       │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 性能指标:                                                  │  │  │ │
│  │ │ │ - 推理时间: ≤100ms                                         │  │  │ │
│  │ │ │ - GPU占用率: ≤80%                                          │  │  │ │
│  │ │ │ - 内存占用: ≤2GB                                           │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 复用决策: ☐ 新建模块                                       │  │  │ │
│  │ │ └───────────────────────────────────────────────────────────┘  │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                       │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ MR-004: 数据融合模块                                [展开] [编辑] │  │ │
│  │ │ (内容省略...)                                                    │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ SSTS需求覆盖度检查                                                     │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ SSTS技术规格覆盖: 4/4 (100%) ✅                                  │  │ │
│  │ │ ☑ 摄像头 → MR-001                                                │  │ │
│  │ │ ☑ 雷达 → MR-002                                                  │  │ │
│  │ │ ☑ 图像处理 → MR-003                                              │  │ │
│  │ │ ☑ 数据融合 → MR-004                                              │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 资产复用统计                                                           │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ 复用模块: 1个 (MR-001)                                           │  │ │
│  │ │ 新建模块: 3个 (MR-002, MR-003, MR-004)                           │  │ │
│  │ │ 复用率: 25%                                                      │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ [保存草稿] [提交评审] [导出MR文档]                                     │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ [← 上一步: 接口设计] [下一步: MR-Team分配 (P3步骤5) →]                 │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 三、MR模板结构

### 3.1 MR标准章节

| 章节 | 是否必填 | 说明 |
|-----|---------|------|
| 1. 模块描述 | 是 | 模块功能描述 |
| 2. 功能需求 | 是 | 模块功能需求 |
| 3. 技术规格 | 是 | 硬件、软件、算法规格 |
| 4. 接口定义 | 是 | 输入输出接口定义 |
| 5. 性能指标 | 是 | 可量化的性能指标 |
| 6. 复用决策 | 是 | 复用/新建决策 |

### 3.2 MR编号规则

```
MR-XXX: 模块需求
  ├─ MR-001: 第一个模块
  ├─ MR-002: 第二个模块
  └─ ...
```

---

## 四、业务规则

### 4.1 MR拆解规则

1. **一个SSTS拆解为多个MR**
2. **所有SSTS技术规格必须被MR覆盖**
3. **MR之间的接口必须明确定义**
4. **每个MR必须有复用决策**
5. **性能指标必须可量化**

### 4.2 复用决策规则

- **复用现有模块**: 选择已有模块，标注版本号
- **新建模块**: 创建新模块，定义开发计划

### 4.3 MR评审规则

1. **草稿状态 (Draft)**: 可编辑
2. **评审中 (Review)**: 只读，等待评审
3. **已批准 (Approved)**: 只读，可进入P4流程

---

**下一步**: 进入 [P3步骤5: MR-Team分配](../../prototype-framework/navigation-design/02-模式1-流程驱动导航设计.md#62-步骤详细设计)

