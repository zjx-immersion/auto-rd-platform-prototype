# C3-F04: 工作量估算

> **功能编号**: C3-F04  
> **功能名称**: 工作量估算  
> **所属模块**: C3-开发管理  
> **所属流程**: P4-团队迭代流程 (步骤2.4)  
> **优先级**: P0 (核心功能)  
> **设计日期**: 2025-01-15

---

## 一、功能概述

### 1.1 功能定位

工作量估算是Sprint规划的关键环节，负责团队共同估算Task工作量，确保估算的准确性和团队共识。

### 1.2 核心价值

- ✅ 团队共同估算
- ✅ 提高估算准确性
- ✅ 建立团队共识
- ✅ 识别估算风险
- ✅ 优化资源分配

### 1.3 需求流转

```
Epic → Feature → PRD → SSTS → MR → Sprint → Backlog → Task → Estimate
                                                                  ↑
                                                            P4步骤2.4 (当前)
```

### 1.4 用户角色

- **主要用户**: DL、Developer
- **协作用户**: PM、SM
- **查看用户**: All

---

## 二、页面设计

### 2.1 工作量估算页面

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ P4: 团队迭代流程 > 步骤2.4: 工作量估算                                      │
│ Sprint 2025-02 - Planning Poker估算会议                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 会议信息                                                               │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ Sprint: Sprint 2025-02                                           │  │ │
│  │ │ 会议时间: 2025-01-31 14:00-16:00                                 │  │ │
│  │ │ 主持人: 👤 SM-钱七                                               │  │ │
│  │ │ 参会人员: 李四、王五、赵六、孙八、周九 (5人)                     │  │ │
│  │ │ 估算方法: Planning Poker (斐波那契数列)                          │  │ │
│  │ │ 进度: 5/15 Task已估算                                            │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 当前估算Task                                                           │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ TASK-006: 图像去畸变算法实现                                     │  │ │
│  │ │ ┌───────────────────────────────────────────────────────────┐  │  │ │
│  │ │ │ 所属MR: MR-004 图像预处理模块                              │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 任务描述:                                                  │  │  │ │
│  │ │ │ 实现图像去畸变算法，支持鱼眼镜头和广角镜头的畸变校正。     │  │  │ │
│  │ │ │ 使用OpenCV库实现，需要支持实时处理(≤20ms)。                │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 技术要点:                                                  │  │  │ │
│  │ │ │ - OpenCV相机标定和去畸变                                   │  │  │ │
│  │ │ │ - 实时性能优化                                             │  │  │ │
│  │ │ │ - 支持多种镜头类型                                         │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 验收标准:                                                  │  │  │ │
│  │ │ │ ☑ 去畸变效果良好，无明显失真                               │  │  │ │
│  │ │ │ ☑ 处理延迟≤20ms                                            │  │  │ │
│  │ │ │ ☑ 支持鱼眼和广角镜头                                       │  │  │ │
│  │ │ │ ☑ 单元测试覆盖率≥80%                                       │  │  │ │
│  │ │ │                                                            │  │  │ │
│  │ │ │ 依赖: TASK-001 (摄像头驱动)                                │  │  │ │
│  │ │ │ 优先级: High                                               │  │  │ │
│  │ │ └───────────────────────────────────────────────────────────┘  │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ Planning Poker投票                                                     │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ 斐波那契数列: [1] [2] [3] [5] [8] [13] [21] [?]                │  │ │
│  │ │                                                                  │  │ │
│  │ │ 投票状态: 5/5人已投票                                            │  │ │
│  │ │                                                                  │  │ │
│  │ │ 👤 李四 (DL):        [8小时] ✅                                  │  │ │
│  │ │ 👤 王五 (Dev):       [5小时] ✅                                  │  │ │
│  │ │ 👤 赵六 (Dev):       [8小时] ✅                                  │  │ │
│  │ │ 👤 孙八 (Dev):       [13小时] ✅                                 │  │ │
│  │ │ 👤 周九 (Dev):       [8小时] ✅                                  │  │ │
│  │ │                                                                  │  │ │
│  │ │ 投票结果:                                                        │  │ │
│  │ │   5小时: █ 1票 (20%)                                             │  │ │
│  │ │   8小时: ████ 3票 (60%)                                          │  │ │
│  │ │  13小时: █ 1票 (20%)                                             │  │ │
│  │ │                                                                  │  │ │
│  │ │ 中位数: 8小时                                                    │  │ │
│  │ │ 平均值: 8.4小时                                                  │  │ │
│  │ │ 差异度: 中等 (最大差异: 8小时)                                   │  │ │
│  │ │                                                                  │  │ │
│  │ │ ⚠️ 建议: 投票差异较大，建议讨论后重新投票                        │  │ │
│  │ │                                                                  │  │ │
│  │ │ [显示投票] [重新投票] [讨论]                                    │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 讨论区                                                                 │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ 👤 孙八 (14:25):                                                 │  │ │
│  │ │ 我估13小时是因为需要支持多种镜头类型，可能需要更多调试时间。     │  │ │
│  │ │                                                                  │  │ │
│  │ │ 👤 王五 (14:26):                                                 │  │ │
│  │ │ 我估5小时是因为OpenCV已经有现成的API，主要是调用和参数调优。     │  │ │
│  │ │                                                                  │  │ │
│  │ │ 👤 李四 (14:27):                                                 │  │ │
│  │ │ 我认为8小时比较合理，包括算法实现、性能优化和单元测试。          │  │ │
│  │ │ 建议采用8小时作为最终估算。                                      │  │ │
│  │ │                                                                  │  │ │
│  │ │ [发送消息...]                                                    │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 最终估算                                                               │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ 估算工作量: [8 ▼] 小时                                           │  │ │
│  │ │ 估算依据: 团队讨论后采用中位数                                   │  │ │
│  │ │ 风险因素: 性能优化可能需要额外时间                               │  │ │
│  │ │ 缓冲时间: 1小时 (12.5%)                                          │  │ │
│  │ │                                                                  │  │ │
│  │ │ 最终工作量: 9小时                                                │  │ │
│  │ │                                                                  │  │ │
│  │ │ [确认估算] [跳过] [下一个Task]                                  │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 历史参考                                                               │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ 类似任务:                                                        │  │ │
│  │ │ - TASK-123 (Sprint 2024-12): 图像校正算法 - 估算8h, 实际10h     │  │ │
│  │ │ - TASK-234 (Sprint 2025-01): 镜头畸变处理 - 估算6h, 实际7h      │  │ │
│  │ │                                                                  │  │ │
│  │ │ 团队速率:                                                        │  │ │
│  │ │ - 平均估算准确度: 85%                                            │  │ │
│  │ │ - 平均超时率: 15%                                                │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ Task列表                                                               │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ ✅ TASK-001: 摄像头驱动适配 - 8小时                              │  │ │
│  │ │ ✅ TASK-002: 图像采集接口实现 - 5小时                            │  │ │
│  │ │ ✅ TASK-003: 单元测试编写 - 3小时                                │  │ │
│  │ │ ✅ TASK-004: 雷达数据解析 - 6小时                                │  │ │
│  │ │ ✅ TASK-005: CAN通信实现 - 4小时                                 │  │ │
│  │ │ ⏳ TASK-006: 图像去畸变算法实现 - 待估算 (当前)                  │  │ │
│  │ │ ⏳ TASK-007: 图像降噪处理 - 待估算                               │  │ │
│  │ │ ⏳ TASK-008: 图像增强算法 - 待估算                               │  │ │
│  │ │ ... (更多Task)                                                   │  │ │
│  │ │                                                                  │  │ │
│  │ │ 已估算: 5/15 Task                                                │  │ │
│  │ │ 总工作量: 26小时 (已估算部分)                                    │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 容量分析                                                               │ │
│  │ ┌─────────────────────────────────────────────────────────────────┐  │ │
│  │ │ 团队容量: 592小时                                                │  │ │
│  │ │ 已估算工作量: 26小时                                             │  │ │
│  │ │ 预估总工作量: ~78小时 (基于已估算比例推算)                       │  │ │
│  │ │ 预估负载率: ~13%                                                 │  │ │
│  │ │ 剩余容量: ~514小时                                               │  │ │
│  │ │                                                                  │  │ │
│  │ │ ⚠️ 建议: 负载率偏低，建议增加更多Task                            │  │ │
│  │ └─────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 操作                                                                   │ │
│  │ [保存进度] [结束估算] [导出估算报告]                                  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 三、估算方法

### 3.1 Planning Poker

1. **斐波那契数列**: 1, 2, 3, 5, 8, 13, 21, ?
2. **投票流程**: 
   - 讲解Task
   - 独立投票
   - 显示结果
   - 讨论差异
   - 重新投票
   - 确认估算

### 3.2 估算规则

1. **单位**: 小时
2. **粒度**: 单个Task≤8小时
3. **缓冲**: 预留10%-20%缓冲
4. **参考**: 参考历史数据

---

## 四、业务规则

### 4.1 投票规则

1. **参与人员**: 所有开发人员
2. **投票方式**: 独立投票
3. **差异处理**: 差异>5小时需讨论
4. **最终估算**: 团队共识

### 4.2 估算准确性

1. **历史参考**: 参考类似任务
2. **团队速率**: 考虑团队速率
3. **风险因素**: 识别风险因素
4. **缓冲时间**: 预留缓冲时间

---

**下一步**: 继续设计 [C3-F05-Sprint承诺.md](./C3-F05-Sprint承诺.md)

