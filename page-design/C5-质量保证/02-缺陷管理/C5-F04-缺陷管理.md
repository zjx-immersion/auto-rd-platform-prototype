# C5-F04: 缺陷管理

> **功能编号**: C5-F04  
> **功能名称**: 缺陷管理  
> **所属模块**: C5-质量保证 > 缺陷管理  
> **主要用户**: QA/DEV  
> **页面类型**: 表单页 + 看板页

---

## 一、功能概述

### 1.1 功能定位
缺陷管理用于记录、跟踪、修复和验证软件缺陷。

### 1.2 核心价值
- **全生命周期**: 从发现到关闭的完整流程
- **优先级管理**: 按严重程度和优先级处理
- **数据分析**: 缺陷趋势、分布分析
- **质量度量**: 缺陷密度、修复效率

---

## 二、页面设计

```
┌─────────────────────────────────────────────────────────────┐
│ 🐛 缺陷管理                    [新建缺陷] [导入] [导出]     │
├─────────────────────────────────────────────────────────────┤
│  缺陷概览                                                   │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │ 未解决   │ │ 今日新增 │ │ 平均修复时长│ │ 逃逸率   │    │
│  │    12    │ │    3     │ │   2.5天  │ │   5%     │      │
│  │  ⚠️ 高   │ │  ↑ +1   │ │  ↓ -0.5天│ │  ✅ 低   │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
│                                                             │
│  缺陷看板                                                   │
│  ┌─────────┬─────────┬─────────┬─────────┬─────────┐      │
│  │ 新建(5) │ 已分配(3)│ 修复中(4)│ 待验证(2)│ 已关闭  │      │
│  ├─────────┼─────────┼─────────┼─────────┼─────────┤      │
│  │🔴BUG-001│🔴BUG-003│🟡BUG-005│🟢BUG-008│         │      │
│  │帧率低   │内存泄漏 │界面错位 │数据丢失 │         │      │
│  │严重/高  │严重/高  │一般/中  │轻微/低  │         │      │
│  │         │         │         │         │         │      │
│  │🟡BUG-002│🟡BUG-004│🟢BUG-006│🟢BUG-009│         │      │
│  │日志缺失 │配置错误 │提示不清 │样式问题 │         │      │
│  │一般/中  │一般/中  │轻微/低  │轻微/低  │         │      │
│  └─────────┴─────────┴─────────┴─────────┴─────────┘      │
│                                                             │
│  缺陷详情 - BUG-001                                         │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 标题: 摄像头数据采集帧率低于30fps                     │ │
│  │ 严重程度: 🔴 严重 | 优先级: ⭐⭐⭐ 高               │ │
│  │ 状态: 新建 | 发现版本: v1.0.0 | 环境: 集成测试       │ │
│  │                                                        │ │
│  │ 描述:                                                  │ │
│  │ 在边界值测试中发现，当同时采集2路摄像头数据时，      │ │
│  │ 帧率仅为25fps，低于需求要求的30fps。                 │ │
│  │                                                        │ │
│  │ 复现步骤:                                              │ │
│  │ 1. 启动数据采集模块                                   │ │
│  │ 2. 同时启动2路摄像头采集                              │ │
│  │ 3. 观察帧率                                            │ │
│  │                                                        │ │
│  │ 预期结果: 帧率≥30fps                                  │ │
│  │ 实际结果: 帧率仅25fps                                 │ │
│  │                                                        │ │
│  │ 附件: [screenshot.png] [log.txt]                      │ │
│  │                                                        │ │
│  │ 关联信息:                                              │ │
│  │ • MR: MR-001 摄像头模块                               │ │
│  │ • Task: TASK-1234 数据采集接口                        │ │
│  │ • 测试用例: TC-003 边界值测试                         │ │
│  │                                                        │ │
│  │ 分配给: [DEV-张三 ▼] | 截止日期: [2025-01-17]        │ │
│  │                                                        │ │
│  │ 活动记录:                                              │ │
│  │ 2025-01-15 10:30 QA-李四 创建缺陷                     │ │
│  │ 2025-01-15 11:00 DL-王五 分配给DEV-张三               │ │
│  │ 2025-01-15 14:00 DEV-张三 开始修复                    │ │
│  │                                                        │ │
│  │ [编辑] [分配] [修复] [关闭] [导出]                    │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  缺陷统计                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 按严重程度:                                            │ │
│  │ 严重: ████░░░░░░░░░░░░░░░░  20% (5)                  │ │
│  │ 一般: ██████████░░░░░░░░░░  50% (12)                 │ │
│  │ 轻微: ██████░░░░░░░░░░░░░░  30% (8)                  │ │
│  │                                                        │ │
│  │ 按模块:                                                │ │
│  │ 摄像头: ████████░░░░░░░░░░  40% (10)                 │ │
│  │ 雷达: ██████░░░░░░░░░░░░░░  30% (7)                  │ │
│  │ 融合: ██████░░░░░░░░░░░░░░  30% (8)                  │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、数据设计

```typescript
enum DefectSeverity {
  CRITICAL = 'CRITICAL',  // 严重
  MAJOR = 'MAJOR',        // 一般
  MINOR = 'MINOR'         // 轻微
}

enum DefectPriority {
  HIGH = 'HIGH',
  MEDIUM = 'MEDIUM',
  LOW = 'LOW'
}

enum DefectStatus {
  NEW = 'NEW',
  ASSIGNED = 'ASSIGNED',
  IN_PROGRESS = 'IN_PROGRESS',
  RESOLVED = 'RESOLVED',
  VERIFIED = 'VERIFIED',
  CLOSED = 'CLOSED',
  REOPENED = 'REOPENED'
}

interface Defect {
  id: string;
  title: string;
  description: string;
  severity: DefectSeverity;
  priority: DefectPriority;
  status: DefectStatus;
  foundVersion: string;
  environment: string;
  stepsToReproduce: string[];
  expectedResult: string;
  actualResult: string;
  attachments: Array<{ type: string; url: string }>;
  relatedMR?: string;
  relatedTask?: string;
  relatedTestCase?: string;
  reporter: string;
  assignee?: string;
  dueDate?: Date;
  createdAt: Date;
  resolvedAt?: Date;
  verifiedAt?: Date;
  closedAt?: Date;
  activities: Array<{
    timestamp: Date;
    user: string;
    action: string;
    comment?: string;
  }>;
}
```

---

## 四、Mock数据

```json
{
  "id": "BUG-001",
  "title": "摄像头数据采集帧率低于30fps",
  "description": "在边界值测试中发现，当同时采集2路摄像头数据时，帧率仅为25fps，低于需求要求的30fps。",
  "severity": "CRITICAL",
  "priority": "HIGH",
  "status": "IN_PROGRESS",
  "foundVersion": "v1.0.0",
  "environment": "集成测试环境",
  "stepsToReproduce": [
    "启动数据采集模块",
    "同时启动2路摄像头采集",
    "观察帧率"
  ],
  "expectedResult": "帧率≥30fps",
  "actualResult": "帧率仅25fps",
  "attachments": [
    {"type": "SCREENSHOT", "url": "/attachments/screenshot-001.png"},
    {"type": "LOG", "url": "/attachments/log-001.txt"}
  ],
  "relatedMR": "MR-001",
  "relatedTask": "TASK-1234",
  "relatedTestCase": "TC-003",
  "reporter": "QA-李四",
  "assignee": "DEV-张三",
  "dueDate": "2025-01-17",
  "createdAt": "2025-01-15T10:30:00Z",
  "activities": [
    {"timestamp": "2025-01-15T10:30:00Z", "user": "QA-李四", "action": "创建缺陷"},
    {"timestamp": "2025-01-15T11:00:00Z", "user": "DL-王五", "action": "分配给DEV-张三"},
    {"timestamp": "2025-01-15T14:00:00Z", "user": "DEV-张三", "action": "开始修复"}
  ]
}
```

---

**设计完成日期**: 2025-01-16

