# C5-F02: 测试用例设计

> **功能编号**: C5-F02  
> **功能名称**: 测试用例设计  
> **所属模块**: C5-质量保证 > 测试管理  
> **主要用户**: QA  
> **页面类型**: 表单页 + 树形列表页

---

## 一、功能概述

### 1.1 功能定位
测试用例设计用于设计、编写、组织和管理测试用例。

### 1.2 核心价值
- **需求覆盖**: 确保需求100%覆盖
- **用例复用**: 支持用例模板和复用
- **分层设计**: 单元/集成/系统测试分层
- **可追溯性**: 用例与需求双向追溯

---

## 二、页面设计

```
┌─────────────────────────────────────────────────────────────┐
│ 📝 测试用例 - MR-001 摄像头模块      [新建] [导入] [导出]  │
├─────────────────────────────────────────────────────────────┤
│ 用例树                          │ 用例详情                  │
│ ┌─────────────────────────────┐ │ ┌───────────────────────┐ │
│ │ 📁 MR-001 摄像头模块 (25)   │ │ │ TC-001: 数据采集正常流程│
│ │  ├─ 📁 功能测试 (15)        │ │ │                       │ │
│ │  │  ├─ 📁 数据采集 (8)      │ │ │ 优先级: ⭐⭐⭐ 高   │ │
│ │  │  │  ├─ ✅ TC-001 正常流程│ │ │ 类型: 功能测试        │ │
│ │  │  │  ├─ ✅ TC-002 异常处理│ │ │ 自动化: ☑ 是         │ │
│ │  │  │  └─ ⏳ TC-003 边界值 │ │ │                       │ │
│ │  │  └─ 📁 图像处理 (7)      │ │ │ 前置条件:             │ │
│ │  ├─ 📁 集成测试 (6)         │ │ │ • 摄像头已连接        │ │
│ │  └─ 📁 性能测试 (4)         │ │ │ • CAN总线正常         │ │
│ │                              │ │ │                       │ │
│ │ 统计:                        │ │ │ 测试步骤:             │ │
│ │ 总计: 25 | 已设计: 20       │ │ │ 1. 启动数据采集       │ │
│ │ 已执行: 15 | 通过: 12       │ │ │ 2. 发送采集命令       │ │
│ │                              │ │ │ 3. 验证数据接收       │ │
│ └─────────────────────────────┘ │ │                       │ │
│                                  │ │ 预期结果:             │ │
│ 筛选: [全部▼] [功能测试▼]      │ │ • 数据采集成功        │ │
│       [高优先级▼] [未执行▼]    │ │ • 帧率≥30fps         │ │
│                                  │ │ • 数据格式正确        │ │
│ 用例列表                         │ │                       │ │
│ ┌─────────────────────────────┐ │ │ 关联需求:             │ │
│ │ID    │标题    │优先级│状态 │ │ │ SSTS-001: 摄像头数据采集│
│ ├──────┼────────┼──────┼─────┤ │ │                       │ │
│ │TC-001│数据采集│⭐⭐⭐│通过│ │ │ 执行历史:             │ │
│ │TC-002│异常处理│⭐⭐⭐│通过│ │ │ 2025-01-15: 通过 ✅   │ │
│ │TC-003│边界值  │⭐⭐  │失败│ │ │ 2025-01-14: 失败 ❌   │ │
│ └─────────────────────────────┘ │ │                       │ │
│                                  │ │ [编辑] [执行] [删除]  │ │
│                                  │ └───────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、数据设计

```typescript
interface TestCase {
  id: string;
  title: string;
  mrId: string;
  category: 'FUNCTIONAL' | 'INTEGRATION' | 'PERFORMANCE' | 'SECURITY';
  priority: 'HIGH' | 'MEDIUM' | 'LOW';
  automated: boolean;
  preconditions: string[];
  steps: Array<{
    stepNumber: number;
    action: string;
    expectedResult: string;
  }>;
  relatedRequirements: string[];  // SSTS IDs
  tags: string[];
  status: 'DRAFT' | 'REVIEW' | 'APPROVED' | 'DEPRECATED';
  executionStatus: 'NOT_RUN' | 'PASSED' | 'FAILED' | 'BLOCKED';
  executionHistory: Array<{
    executedAt: Date;
    executor: string;
    result: 'PASSED' | 'FAILED' | 'BLOCKED';
    defectId?: string;
  }>;
}
```

---

## 四、Mock数据

```json
{
  "id": "TC-001",
  "title": "数据采集正常流程",
  "mrId": "MR-001",
  "category": "FUNCTIONAL",
  "priority": "HIGH",
  "automated": true,
  "preconditions": [
    "摄像头已连接",
    "CAN总线正常"
  ],
  "steps": [
    {
      "stepNumber": 1,
      "action": "启动数据采集模块",
      "expectedResult": "模块启动成功，状态为READY"
    },
    {
      "stepNumber": 2,
      "action": "发送数据采集命令",
      "expectedResult": "命令发送成功，返回ACK"
    },
    {
      "stepNumber": 3,
      "action": "验证数据接收",
      "expectedResult": "数据采集成功，帧率≥30fps，数据格式正确"
    }
  ],
  "relatedRequirements": ["SSTS-001"],
  "tags": ["摄像头", "数据采集", "正常流程"],
  "status": "APPROVED",
  "executionStatus": "PASSED",
  "executionHistory": [
    {
      "executedAt": "2025-01-15T10:00:00Z",
      "executor": "QA-张三",
      "result": "PASSED"
    },
    {
      "executedAt": "2025-01-14T14:00:00Z",
      "executor": "QA-张三",
      "result": "FAILED",
      "defectId": "BUG-001"
    }
  ]
}
```

---

**设计完成日期**: 2025-01-16

