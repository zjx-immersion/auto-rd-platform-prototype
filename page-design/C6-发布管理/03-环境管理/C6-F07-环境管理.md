# C6-F07: 环境管理

> **功能编号**: C6-F07  
> **功能名称**: 环境管理  
> **所属模块**: C6-发布管理 > 环境管理  
> **主要用户**: OPS  
> **页面类型**: 列表页 + 详情页

---

## 一、功能概述

### 1.1 功能定位
环境管理管理开发、测试、预生产、生产等各类环境，包括环境配置、资源监控、版本管理。

### 1.2 核心价值
- **环境隔离**: 不同环境隔离管理
- **资源监控**: 实时监控环境资源
- **版本管理**: 管理环境部署版本
- **配置管理**: 统一管理环境配置

---

## 二、页面设计

### 2.1 环境列表

```
┌─────────────────────────────────────────────────────────────┐
│ 🌍 环境管理                          [新建环境] [刷新]      │
├─────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 🟢 生产环境                                            │ │
│  │ 当前版本: V2.0.0 | 状态: 运行中                        │ │
│  │ 节点: 6 | 容器: 18 | CPU: 45% | 内存: 60%             │ │
│  │ [查看详情] [部署] [配置]                               │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 🟡 预生产环境                                          │ │
│  │ 当前版本: V2.1.0 | 状态: 运行中                        │ │
│  │ 节点: 3 | 容器: 9 | CPU: 30% | 内存: 40%              │ │
│  │ [查看详情] [部署] [配置]                               │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 🔵 测试环境                                            │ │
│  │ 当前版本: V2.1.0 | 状态: 运行中                        │ │
│  │ 节点: 2 | 容器: 6 | CPU: 20% | 内存: 30%              │ │
│  │ [查看详情] [部署] [配置]                               │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 🟣 开发环境                                            │ │
│  │ 当前版本: V2.2.0-dev | 状态: 运行中                   │ │
│  │ 节点: 1 | 容器: 3 | CPU: 15% | 内存: 25%              │ │
│  │ [查看详情] [部署] [配置]                               │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 环境详情

```
┌─────────────────────────────────────────────────────────────┐
│ 🟢 生产环境                          [部署] [配置] [编辑]  │
├─────────────────────────────────────────────────────────────┤
│  基本信息                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 环境名称: 生产环境                                     │ │
│  │ 环境类型: 生产                                         │ │
│  │ 当前版本: V2.0.0                                       │ │
│  │ 部署时间: 2025-01-20 14:00                            │ │
│  │ 状态: 🟢 运行中                                        │ │
│  │ 负责人: OPS-李四                                       │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  资源概览                                                   │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │ 节点数   │ │ 容器数   │ │ CPU使用  │ │ 内存使用 │      │
│  │    6     │ │   18     │ │   45%    │ │   60%    │      │
│  │          │ │          │ │  正常    │ │  正常    │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
│                                                             │
│  节点列表                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 节点       │ IP地址      │ CPU  │ 内存 │ 磁盘 │ 状态 │ │
│  ├───────────┼─────────────┼──────┼──────┼──────┼──────┤ │
│  │ node-01   │ 10.0.1.101  │ 50%  │ 65%  │ 40%  │ 正常 │ │
│  │ node-02   │ 10.0.1.102  │ 45%  │ 60%  │ 35%  │ 正常 │ │
│  │ node-03   │ 10.0.1.103  │ 40%  │ 55%  │ 30%  │ 正常 │ │
│  │ node-04   │ 10.0.1.104  │ 48%  │ 62%  │ 38%  │ 正常 │ │
│  │ node-05   │ 10.0.1.105  │ 42%  │ 58%  │ 32%  │ 正常 │ │
│  │ node-06   │ 10.0.1.106  │ 46%  │ 61%  │ 36%  │ 正常 │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  容器列表                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 容器       │ 节点    │ 镜像      │ CPU  │ 内存 │ 状态 │ │
│  ├───────────┼─────────┼───────────┼──────┼──────┼──────┤ │
│  │ app-01    │ node-01 │ app:v2.0.0│ 30%  │ 512M │ 运行 │ │
│  │ app-02    │ node-01 │ app:v2.0.0│ 28%  │ 500M │ 运行 │ │
│  │ app-03    │ node-01 │ app:v2.0.0│ 32%  │ 520M │ 运行 │ │
│  │ ... 查看全部                                           │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  资源监控                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ CPU使用率                                              │ │
│  │ 60%│                                                    │ │
│  │ 40%│  ●───●───●───●───●                                │ │
│  │ 20%│                                                    │ │
│  │    └────────────────────────────────────────────       │ │
│  │    12:00 13:00 14:00 15:00 16:00                      │ │
│  │                                                        │ │
│  │ 内存使用率                                             │ │
│  │ 80%│                                                    │ │
│  │ 60%│  ●───●───●───●───●                                │ │
│  │ 40%│                                                    │ │
│  │    └────────────────────────────────────────────       │ │
│  │    12:00 13:00 14:00 15:00 16:00                      │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  环境配置                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 数据库: mysql://prod-db.example.com:3306              │ │
│  │ Redis: redis://prod-redis.example.com:6379            │ │
│  │ 消息队列: kafka://prod-kafka.example.com:9092         │ │
│  │ 日志服务: elk://prod-elk.example.com                  │ │
│  │ 监控服务: prometheus://prod-prom.example.com          │ │
│  │ [查看完整配置] [编辑配置]                             │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  版本历史                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 时间         │ 版本   │ 部署人  │ 状态   │ 操作      │ │
│  ├──────────────┼────────┼─────────┼────────┼───────────┤ │
│  │ 2025-01-20   │ V2.0.0 │ OPS-李四│ 运行中 │ [回滚]   │ │
│  │ 14:00        │        │         │        │           │ │
│  ├──────────────┼────────┼─────────┼────────┼───────────┤ │
│  │ 2024-12-15   │ V1.9.0 │ OPS-李四│ 已下线 │ [重新部署]│ │
│  │ 10:00        │        │         │        │           │ │
│  └───────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、数据设计

```typescript
interface Environment {
  id: string;
  name: string;
  type: 'PRODUCTION' | 'STAGING' | 'TEST' | 'DEVELOPMENT';
  currentVersion: string;
  deployedAt: Date;
  status: 'RUNNING' | 'STOPPED' | 'ERROR';
  owner: string;
  resources: {
    nodes: number;
    containers: number;
    cpuUsage: number;
    memoryUsage: number;
  };
  nodes: Array<{
    name: string;
    ip: string;
    cpuUsage: number;
    memoryUsage: number;
    diskUsage: number;
    status: 'NORMAL' | 'WARNING' | 'ERROR';
  }>;
  containers: Array<{
    name: string;
    node: string;
    image: string;
    cpuUsage: number;
    memoryUsage: number;
    status: 'RUNNING' | 'STOPPED' | 'ERROR';
  }>;
  config: {
    database: string;
    redis: string;
    messageQueue: string;
    logging: string;
    monitoring: string;
  };
  versionHistory: Array<{
    version: string;
    deployedAt: Date;
    deployedBy: string;
    status: 'RUNNING' | 'OFFLINE';
  }>;
}
```

---

## 四、Mock数据

```json
{
  "id": "ENV-001",
  "name": "生产环境",
  "type": "PRODUCTION",
  "currentVersion": "V2.0.0",
  "deployedAt": "2025-01-20T14:00:00Z",
  "status": "RUNNING",
  "owner": "OPS-李四",
  "resources": {
    "nodes": 6,
    "containers": 18,
    "cpuUsage": 45,
    "memoryUsage": 60
  },
  "nodes": [
    {"name": "node-01", "ip": "10.0.1.101", "cpuUsage": 50, "memoryUsage": 65, "diskUsage": 40, "status": "NORMAL"},
    {"name": "node-02", "ip": "10.0.1.102", "cpuUsage": 45, "memoryUsage": 60, "diskUsage": 35, "status": "NORMAL"}
  ],
  "containers": [
    {"name": "app-01", "node": "node-01", "image": "app:v2.0.0", "cpuUsage": 30, "memoryUsage": 512, "status": "RUNNING"}
  ],
  "config": {
    "database": "mysql://prod-db.example.com:3306",
    "redis": "redis://prod-redis.example.com:6379",
    "messageQueue": "kafka://prod-kafka.example.com:9092",
    "logging": "elk://prod-elk.example.com",
    "monitoring": "prometheus://prod-prom.example.com"
  },
  "versionHistory": [
    {"version": "V2.0.0", "deployedAt": "2025-01-20T14:00:00Z", "deployedBy": "OPS-李四", "status": "RUNNING"},
    {"version": "V1.9.0", "deployedAt": "2024-12-15T10:00:00Z", "deployedBy": "OPS-李四", "status": "OFFLINE"}
  ]
}
```

---

**设计完成日期**: 2025-01-16

