# C6-F02: 发布检查清单

> **功能编号**: C6-F02  
> **功能名称**: 发布检查清单  
> **所属模块**: C6-发布管理 > 发布计划  
> **主要用户**: DL  
> **页面类型**: 检查页

---

## 一、功能概述

### 1.1 功能定位
发布检查清单是发布前的质量门禁，确保所有发布条件满足后才能发布。

### 1.2 核心价值
- **风险控制**: 发布前全面检查
- **标准化**: 统一发布标准
- **可追溯**: 检查记录可追溯
- **强制执行**: 不通过阻止发布

---

## 二、页面设计

```
┌─────────────────────────────────────────────────────────────┐
│ ✅ 发布检查清单 - V2.1.0              [刷新] [导出]        │
├─────────────────────────────────────────────────────────────┤
│  检查概览                                                   │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │ 总体状态 │ │ 检查项   │ │ 通过项   │ │ 完成度   │      │
│  │  ⚠️ 未通过│ │   25     │ │   22     │ │   88%    │      │
│  │          │ │          │ │          │ │          │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ✅ 代码质量 (5/5)                                      │ │
│  │   ✅ 所有MR已合并                                     │ │
│  │   ✅ 代码覆盖率 ≥ 80% (实际: 85%)                     │ │
│  │   ✅ 代码质量等级 ≥ B (实际: A)                       │ │
│  │   ✅ 严重问题数 = 0 (实际: 0)                         │ │
│  │   ✅ 技术债务 ≤ 5天 (实际: 2.5天)                     │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ⚠️ 测试质量 (4/5)                                      │ │
│  │   ✅ 单元测试通过率 = 100% (实际: 100%)               │ │
│  │   ✅ 集成测试通过率 ≥ 95% (实际: 100%)                │ │
│  │   ❌ 性能测试通过率 ≥ 90% (实际: 75%)                 │ │
│  │      原因: 三路摄像头帧率低于30fps                     │ │
│  │      [查看详情] [创建任务]                             │ │
│  │   ✅ 自动化测试率 ≥ 70% (实际: 80%)                   │ │
│  │   ✅ 测试报告已生成                                   │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ✅ 缺陷质量 (4/4)                                      │ │
│  │   ✅ 严重缺陷数 = 0 (实际: 0)                         │ │
│  │   ✅ 高优先级缺陷数 = 0 (实际: 0)                     │ │
│  │   ✅ 遗留缺陷数 ≤ 2 (实际: 1)                         │ │
│  │   ✅ 缺陷密度 ≤ 2.0 (实际: 1.6)                       │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ✅ 文档完整性 (4/4)                                    │ │
│  │   ✅ API文档已更新                                    │ │
│  │   ✅ 用户手册已更新                                   │ │
│  │   ✅ 发布说明已编写                                   │ │
│  │   ✅ 变更日志已更新                                   │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ✅ 环境准备 (4/4)                                      │ │
│  │   ✅ 生产环境资源充足                                 │ │
│  │   ✅ 数据库备份已完成                                 │ │
│  │   ✅ 回滚方案已准备                                   │ │
│  │   ✅ 监控告警已配置                                   │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ⚠️ 审批流程 (1/3)                                      │ │
│  │   ✅ DL审批: 已通过 (DL-张三, 2025-01-14)             │ │
│  │   ⚪ QA审批: 待审批                                   │ │
│  │   ⚪ PO审批: 待审批                                   │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                             │
│  检查结论                                                   │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ ⚠️ 发布检查未通过                                     │ │
│  │                                                        │ │
│  │ 阻塞项:                                                │ │
│  │ • 性能测试通过率75%，低于90%要求                      │ │
│  │ • QA审批待完成                                        │ │
│  │ • PO审批待完成                                        │ │
│  │                                                        │ │
│  │ 建议:                                                  │ │
│  │ • 优化三路摄像头性能，提升帧率至30fps以上             │ │
│  │ • 完成QA和PO审批流程                                  │ │
│  │                                                        │ │
│  │ [修复问题] [申请豁免] [取消发布]                      │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、数据设计

```typescript
interface ReleaseChecklist {
  releaseId: string;
  version: string;
  checkTime: Date;
  status: 'PASSED' | 'FAILED' | 'EXEMPTED';
  categories: Array<{
    name: string;
    passed: number;
    total: number;
    items: Array<{
      name: string;
      required: boolean;
      status: 'PASSED' | 'FAILED' | 'PENDING';
      expected?: string;
      actual?: string;
      reason?: string;
    }>;
  }>;
  blockers: string[];
  recommendations: string[];
  exemption?: {
    exemptedBy: string;
    reason: string;
    approvedAt: Date;
  };
}
```

---

## 四、Mock数据

```json
{
  "releaseId": "REL-001",
  "version": "V2.1.0",
  "checkTime": "2025-01-15T16:00:00Z",
  "status": "FAILED",
  "categories": [
    {
      "name": "代码质量",
      "passed": 5,
      "total": 5,
      "items": [
        {"name": "所有MR已合并", "required": true, "status": "PASSED"},
        {"name": "代码覆盖率 ≥ 80%", "required": true, "status": "PASSED", "expected": "80%", "actual": "85%"},
        {"name": "代码质量等级 ≥ B", "required": true, "status": "PASSED", "expected": "B", "actual": "A"},
        {"name": "严重问题数 = 0", "required": true, "status": "PASSED", "expected": "0", "actual": "0"},
        {"name": "技术债务 ≤ 5天", "required": true, "status": "PASSED", "expected": "5天", "actual": "2.5天"}
      ]
    },
    {
      "name": "测试质量",
      "passed": 4,
      "total": 5,
      "items": [
        {"name": "单元测试通过率 = 100%", "required": true, "status": "PASSED", "expected": "100%", "actual": "100%"},
        {"name": "集成测试通过率 ≥ 95%", "required": true, "status": "PASSED", "expected": "95%", "actual": "100%"},
        {
          "name": "性能测试通过率 ≥ 90%",
          "required": true,
          "status": "FAILED",
          "expected": "90%",
          "actual": "75%",
          "reason": "三路摄像头帧率低于30fps"
        },
        {"name": "自动化测试率 ≥ 70%", "required": true, "status": "PASSED", "expected": "70%", "actual": "80%"},
        {"name": "测试报告已生成", "required": true, "status": "PASSED"}
      ]
    },
    {
      "name": "审批流程",
      "passed": 1,
      "total": 3,
      "items": [
        {"name": "DL审批", "required": true, "status": "PASSED"},
        {"name": "QA审批", "required": true, "status": "PENDING"},
        {"name": "PO审批", "required": true, "status": "PENDING"}
      ]
    }
  ],
  "blockers": [
    "性能测试通过率75%，低于90%要求",
    "QA审批待完成",
    "PO审批待完成"
  ],
  "recommendations": [
    "优化三路摄像头性能，提升帧率至30fps以上",
    "完成QA和PO审批流程"
  ]
}
```

---

**设计完成日期**: 2025-01-16

